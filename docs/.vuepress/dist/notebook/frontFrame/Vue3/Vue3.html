<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vue3基本使用 | Pz&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/Pz-blog/images/head_photo.jpg">
    <meta name="description" content="Pz&#39;s blog">
    
    <link rel="preload" href="/Pz-blog/assets/css/0.styles.016f71d4.css" as="style"><link rel="preload" href="/Pz-blog/assets/js/app.763ae9aa.js" as="script"><link rel="preload" href="/Pz-blog/assets/js/2.43fbf41c.js" as="script"><link rel="preload" href="/Pz-blog/assets/js/3.17fa64b6.js" as="script"><link rel="prefetch" href="/Pz-blog/assets/js/10.5d96a17b.js"><link rel="prefetch" href="/Pz-blog/assets/js/11.bed52ec7.js"><link rel="prefetch" href="/Pz-blog/assets/js/12.6078bdfd.js"><link rel="prefetch" href="/Pz-blog/assets/js/13.96a5152a.js"><link rel="prefetch" href="/Pz-blog/assets/js/14.f326483b.js"><link rel="prefetch" href="/Pz-blog/assets/js/15.b81a34c1.js"><link rel="prefetch" href="/Pz-blog/assets/js/16.9b5a7e62.js"><link rel="prefetch" href="/Pz-blog/assets/js/17.74fe7bb3.js"><link rel="prefetch" href="/Pz-blog/assets/js/18.2eb17e0f.js"><link rel="prefetch" href="/Pz-blog/assets/js/19.f5418980.js"><link rel="prefetch" href="/Pz-blog/assets/js/20.9e3a1523.js"><link rel="prefetch" href="/Pz-blog/assets/js/21.c8d9e5ec.js"><link rel="prefetch" href="/Pz-blog/assets/js/22.971cba13.js"><link rel="prefetch" href="/Pz-blog/assets/js/23.4f5b9754.js"><link rel="prefetch" href="/Pz-blog/assets/js/4.9ac0f622.js"><link rel="prefetch" href="/Pz-blog/assets/js/5.9beb2ebc.js"><link rel="prefetch" href="/Pz-blog/assets/js/6.bcd6a5bf.js"><link rel="prefetch" href="/Pz-blog/assets/js/7.6d2c5fca.js"><link rel="prefetch" href="/Pz-blog/assets/js/8.7248041a.js"><link rel="prefetch" href="/Pz-blog/assets/js/9.30275165.js">
    <link rel="stylesheet" href="/Pz-blog/assets/css/0.styles.016f71d4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Pz-blog/" class="home-link router-link-active"><!----> <span class="site-name">Pz's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          布局
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Pz-blog/notebook/layout/flex布局.html" class="nav-link">
  flex布局
</a></li><li class="dropdown-subitem"><a href="/Pz-blog/notebook/layout/Grid布局.html" class="nav-link">
  Grid布局
</a></li></ul></li><li class="dropdown-item"><h4>
          javaScript
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Pz-blog/notebook/js/数组操作.html" class="nav-link">
  数组操作
</a></li><li class="dropdown-subitem"><a href="/Pz-blog/notebook/js/js进阶/JS进阶1.html" class="nav-link">
  js进阶1
</a></li><li class="dropdown-subitem"><a href="/Pz-blog/notebook/js/js进阶/JS进阶2.html" class="nav-link">
  js进阶2
</a></li></ul></li><li class="dropdown-item"><h4>
          构建工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Pz-blog/notebook/buildTools/webpack.html" class="nav-link">
  webpack
</a></li></ul></li><li class="dropdown-item"><h4>
          数据请求
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Pz-blog/notebook/dataRequest/axios.html" class="nav-link">
  axios
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端框架" class="dropdown-title"><span class="title">前端框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端框架" class="mobile-dropdown-title"><span class="title">前端框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Vue2
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Pz-blog/notebook/frontFrame/Vue2/Vue指令.html" class="nav-link">
  Vue指令
</a></li><li class="dropdown-subitem"><a href="/Pz-blog/notebook/frontFrame/Vue2/Vue-router.html" class="nav-link">
  VueRouter
</a></li></ul></li><li class="dropdown-item"><h4>
          Vue3
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Pz-blog/notebook/frontFrame/Vue3/Vue3.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Vue3基本使用
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="探索原理" class="dropdown-title"><span class="title">探索原理</span> <span class="arrow down"></span></button> <button type="button" aria-label="探索原理" class="mobile-dropdown-title"><span class="title">探索原理</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Pz-blog/notebook/learnPrinciple/探索原理.html" class="nav-link">
  javaScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="代码管理" class="dropdown-title"><span class="title">代码管理</span> <span class="arrow down"></span></button> <button type="button" aria-label="代码管理" class="mobile-dropdown-title"><span class="title">代码管理</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Pz-blog/notebook/git/Git.html" class="nav-link">
  git
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/liupziio/Pz-blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  My Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          布局
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Pz-blog/notebook/layout/flex布局.html" class="nav-link">
  flex布局
</a></li><li class="dropdown-subitem"><a href="/Pz-blog/notebook/layout/Grid布局.html" class="nav-link">
  Grid布局
</a></li></ul></li><li class="dropdown-item"><h4>
          javaScript
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Pz-blog/notebook/js/数组操作.html" class="nav-link">
  数组操作
</a></li><li class="dropdown-subitem"><a href="/Pz-blog/notebook/js/js进阶/JS进阶1.html" class="nav-link">
  js进阶1
</a></li><li class="dropdown-subitem"><a href="/Pz-blog/notebook/js/js进阶/JS进阶2.html" class="nav-link">
  js进阶2
</a></li></ul></li><li class="dropdown-item"><h4>
          构建工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Pz-blog/notebook/buildTools/webpack.html" class="nav-link">
  webpack
</a></li></ul></li><li class="dropdown-item"><h4>
          数据请求
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Pz-blog/notebook/dataRequest/axios.html" class="nav-link">
  axios
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端框架" class="dropdown-title"><span class="title">前端框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端框架" class="mobile-dropdown-title"><span class="title">前端框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Vue2
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Pz-blog/notebook/frontFrame/Vue2/Vue指令.html" class="nav-link">
  Vue指令
</a></li><li class="dropdown-subitem"><a href="/Pz-blog/notebook/frontFrame/Vue2/Vue-router.html" class="nav-link">
  VueRouter
</a></li></ul></li><li class="dropdown-item"><h4>
          Vue3
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Pz-blog/notebook/frontFrame/Vue3/Vue3.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Vue3基本使用
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="探索原理" class="dropdown-title"><span class="title">探索原理</span> <span class="arrow down"></span></button> <button type="button" aria-label="探索原理" class="mobile-dropdown-title"><span class="title">探索原理</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Pz-blog/notebook/learnPrinciple/探索原理.html" class="nav-link">
  javaScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="代码管理" class="dropdown-title"><span class="title">代码管理</span> <span class="arrow down"></span></button> <button type="button" aria-label="代码管理" class="mobile-dropdown-title"><span class="title">代码管理</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Pz-blog/notebook/git/Git.html" class="nav-link">
  git
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/liupziio/Pz-blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  My Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Vue3基本使用</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Pz-blog/notebook/frontFrame/Vue3/Vue3.html#一、vue三大核心系统" class="sidebar-link">一、Vue三大核心系统</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Pz-blog/notebook/frontFrame/Vue3/Vue3.html#二、vue3-vite-element-plus-prettier-pinia-vuex5-搭建" class="sidebar-link">二、Vue3+vite+Element-Plus+prettier+pinia(vueX5) 搭建</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/frontFrame/Vue3/Vue3.html#_1、常见问题" class="sidebar-link">1、常见问题</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/frontFrame/Vue3/Vue3.html#_2、代码辅助配置" class="sidebar-link">2、代码辅助配置</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/frontFrame/Vue3/Vue3.html#_3、集成pinia" class="sidebar-link">3、集成Pinia</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/frontFrame/Vue3/Vue3.html#_4、element-plus" class="sidebar-link">4、Element-Plus</a></li></ul></li><li><a href="/Pz-blog/notebook/frontFrame/Vue3/Vue3.html#三、组件" class="sidebar-link">三、组件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/frontFrame/Vue3/Vue3.html#_1、异步组件" class="sidebar-link">1、异步组件</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/frontFrame/Vue3/Vue3.html#_2、suspense插槽-处理组件不显示" class="sidebar-link">2、Suspense插槽 处理组件不显示</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/frontFrame/Vue3/Vue3.html#_3、组件之间的v-model" class="sidebar-link">3、组件之间的v-model</a></li></ul></li><li><a href="/Pz-blog/notebook/frontFrame/Vue3/Vue3.html#四、两种setup使用" class="sidebar-link">四、两种setup使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/frontFrame/Vue3/Vue3.html#_1、函数式-setup" class="sidebar-link">1、函数式 setup</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/frontFrame/Vue3/Vue3.html#_2、script-setup" class="sidebar-link">2、script setup</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/frontFrame/Vue3/Vue3.html#_3、两者差异" class="sidebar-link">3、两者差异</a></li></ul></li><li><a href="/Pz-blog/notebook/frontFrame/Vue3/Vue3.html#五、基础api" class="sidebar-link">五、基础Api</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/frontFrame/Vue3/Vue3.html#_1、customref-自定义ref" class="sidebar-link">1、customRef（自定义ref）</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/frontFrame/Vue3/Vue3.html#_2、computed使用" class="sidebar-link">2、computed使用</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/frontFrame/Vue3/Vue3.html#_3、watch的使用" class="sidebar-link">3、watch的使用</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/frontFrame/Vue3/Vue3.html#两种监听模式" class="sidebar-link">两种监听模式</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/frontFrame/Vue3/Vue3.html#_4、在setup中使用ref" class="sidebar-link">4、在setup中使用ref</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/frontFrame/Vue3/Vue3.html#_5、render函数与h函数" class="sidebar-link">5、render函数与h函数</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/frontFrame/Vue3/Vue3.html#_6、directives-自定义指令" class="sidebar-link">6、directives(自定义指令)</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/frontFrame/Vue3/Vue3.html#_7、teleport-template插入到指定容器中" class="sidebar-link">7、teleport（template插入到指定容器中）</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/frontFrame/Vue3/Vue3.html#_8、全局注册插件-app-use" class="sidebar-link">8、全局注册插件(app.use())</a></li></ul></li><li><a href="/Pz-blog/notebook/frontFrame/Vue3/Vue3.html#六、vue中认识jsx" class="sidebar-link">六、Vue中认识jsx</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/frontFrame/Vue3/Vue3.html#_1、基本使用" class="sidebar-link">1、基本使用</a></li></ul></li><li><a href="/Pz-blog/notebook/frontFrame/Vue3/Vue3.html#七、vuex五大核心" class="sidebar-link">七、VueX五大核心</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/frontFrame/Vue3/Vue3.html#_1、state" class="sidebar-link">1、state</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/frontFrame/Vue3/Vue3.html#_2、getters" class="sidebar-link">2、getters</a></li></ul></li><li><a href="/Pz-blog/notebook/frontFrame/Vue3/Vue3.html#八、typescript-与-vue3" class="sidebar-link">八、TypeScript 与 Vue3</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/frontFrame/Vue3/Vue3.html#_1、类型" class="sidebar-link">1、类型</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/frontFrame/Vue3/Vue3.html#_2、router" class="sidebar-link">2、router</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/frontFrame/Vue3/Vue3.html#_3、组件中的双向绑定" class="sidebar-link">3、组件中的双向绑定</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vue3基本使用"><a href="#vue3基本使用" class="header-anchor">#</a> Vue3基本使用</h1> <h2 id="一、vue三大核心系统"><a href="#一、vue三大核心系统" class="header-anchor">#</a> 一、Vue三大核心系统</h2> <ul><li><strong>Compiler模块</strong> : 编译模板系统</li> <li><strong>Runtime模块</strong>：也可以称之为Renderer模块，真正的渲染模块；</li> <li><strong>Reactivity模块</strong>：响应式系统</li></ul> <h2 id="二、vue3-vite-element-plus-prettier-pinia-vuex5-搭建"><a href="#二、vue3-vite-element-plus-prettier-pinia-vuex5-搭建" class="header-anchor">#</a> 二、Vue3+vite+Element-Plus+prettier+pinia(vueX5) 搭建</h2> <h3 id="_1、常见问题"><a href="#_1、常见问题" class="header-anchor">#</a> 1、常见问题</h3> <h4 id="_1-1-别名配置"><a href="#_1-1-别名配置" class="header-anchor">#</a> 1.1 别名配置</h4> <p><a href="https://cn.vitejs.dev/config/#resolve-alias" target="_blank" rel="noopener noreferrer">vite 官网 resolve-alias<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li>在项目中的 <strong>vite.config.ts</strong> 文件中修改</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vite'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">'@vitejs/plugin-vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> AutoImport <span class="token keyword">from</span> <span class="token string">'unplugin-auto-import/vite'</span><span class="token punctuation">;</span><span class="token comment">//按需自动导入element-plus组件插件</span>
<span class="token keyword">import</span> Components <span class="token keyword">from</span> <span class="token string">'unplugin-vue-components/vite'</span><span class="token punctuation">;</span><span class="token comment">//按需自动导入element-plus组件插件</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ElementPlusResolver <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'unplugin-vue-components/resolvers'</span><span class="token punctuation">;</span><span class="token comment">//按需自动导入组件插件</span>

<span class="token comment">// https://vitejs.dev/config/</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">AutoImport</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      resolvers<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">ElementPlusResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">Components</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      resolvers<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">ElementPlusResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  server<span class="token operator">:</span> <span class="token punctuation">{</span>
    port<span class="token operator">:</span> <span class="token number">8080</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    alias<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token comment">//这里设置别名</span>
      <span class="token string-property property">'@'</span><span class="token operator">:</span> <span class="token string">'/src'</span><span class="token punctuation">,</span>
      components<span class="token operator">:</span> <span class="token string">'/src/components'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><ul><li><strong>注意：</strong> 以上设置完之后可以使用，但是编辑器会标红色，很不爽</li></ul> <p><img src="data:image/png;base64,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" alt="image-20220329100840029"></p> <ul><li>所以需要处理
<ul><li>在 <strong>tsconfig.json</strong> 文件中设置</li></ul></li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esnext&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;useDefineForClassFields&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esnext&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;moduleResolution&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;strict&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;jsx&quot;</span><span class="token operator">:</span> <span class="token string">&quot;preserve&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sourceMap&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;resolveJsonModule&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;esModuleInterop&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lib&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;esnext&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;dom&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
+    <span class="token property">&quot;paths&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
+      <span class="token property">&quot;@/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./src/*&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
+      <span class="token property">&quot;components/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./src/components/*&quot;</span><span class="token punctuation">]</span>
+    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;include&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/**/*.ts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;src/**/*.d.ts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;src/**/*.tsx&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;src/**/*.vue&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;references&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./tsconfig.node.json&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

</code></pre></div><h4 id="_1-2-环境变量与模式"><a href="#_1-2-环境变量与模式" class="header-anchor">#</a> 1.2 环境变量与模式</h4> <p><a href="https://cn.vitejs.dev/guide/env-and-mode.html" target="_blank" rel="noopener noreferrer">vite官网说明<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h5 id="_1-2-1-环境变量"><a href="#_1-2-1-环境变量" class="header-anchor">#</a> 1.2.1 环境变量</h5> <ul><li>环境变量与webpack类似，但是使用方式不同</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">//vite的环境变量在这个下边</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Vite 在一个特殊的 <strong><code>import.meta.env</code></strong> 对象上暴露环境变量。这里有一些在所有情况下都可以使用的内建变量：</p> <ul><li><strong><code>import.meta.env.MODE</code></strong>: {string} 应用运行的<a href="https://cn.vitejs.dev/guide/env-and-mode.html#modes" target="_blank" rel="noopener noreferrer">模式<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</li> <li><strong><code>import.meta.env.BASE_URL</code></strong>: {string} 部署应用时的基本 URL。他由<a href="https://cn.vitejs.dev/config/#base" target="_blank" rel="noopener noreferrer"><code>base</code> 配置项<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>决定。</li> <li><strong><code>import.meta.env.PROD</code></strong>: {boolean} 应用是否运行在生产环境。</li> <li><strong><code>import.meta.env.DEV</code></strong>: {boolean} 应用是否运行在开发环境 (永远与 <code>import.meta.env.PROD</code>相反)。</li></ul> <h5 id="env文件"><a href="#env文件" class="header-anchor">#</a> .env文件</h5> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token punctuation">.</span>env                # 所有情况下都会加载
<span class="token punctuation">.</span>env<span class="token punctuation">.</span>local          # 所有情况下都会加载，但会被 git 忽略
<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token punctuation">[</span>mode<span class="token punctuation">]</span>         # 只在指定模式下加载
<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token punctuation">[</span>mode<span class="token punctuation">]</span><span class="token punctuation">.</span>local   # 只在指定模式下加载，但会被 git 忽略
</code></pre></div><ul><li>并且在环境变量中只有 <strong>VITE</strong> 为前缀时候才会暴露出来
<ul><li>也可以 <a href="https://cn.vitejs.dev/guide/env-and-mode.html#env-files" target="_blank" rel="noopener noreferrer">自定义<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">VITE_SOME_KEY</span><span class="token operator">=</span><span class="token number">123</span>
</code></pre></div><h5 id="_1-2-2运行模式"><a href="#_1-2-2运行模式" class="header-anchor">#</a> 1.2.2运行模式</h5> <p>默认情况下，开发服务器 (<code>dev</code> 命令) 运行在 <code>development</code> (开发) 模式，而 <code>build</code> 命令则运行在 <code>production</code> (生产) 模式。</p> <ul><li>运行时会去运行 .env.<code>production</code> 等文件</li></ul> <h3 id="_2、代码辅助配置"><a href="#_2、代码辅助配置" class="header-anchor">#</a> 2、代码辅助配置</h3> <h4 id="_2-1-代码格式化配置"><a href="#_2-1-代码格式化配置" class="header-anchor">#</a> 2.1 代码格式化配置</h4> <h5 id="_2-1-1-集成editorconfig配置"><a href="#_2-1-1-集成editorconfig配置" class="header-anchor">#</a> 2.1.1 集成editorconfig配置</h5> <ul><li><a href="https://editorconfig.org/" target="_blank" rel="noopener noreferrer">EditorConfig<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>  有助于为不同 IDE 编辑器上处理同一项目的多个开发人员维护一致的编码风格。</li> <li>在根目录下创建文件 .editorconfig</li></ul> <div class="language-yaml extra-class"><pre class="language-yaml"><code>
root = true

<span class="token punctuation">[</span>*<span class="token punctuation">]</span> <span class="token comment"># 表示所有文件适用</span>
charset = utf<span class="token punctuation">-</span><span class="token number">8</span> <span class="token comment"># 设置文件字符集为 utf-8</span>
indent_style = space <span class="token comment"># 缩进风格（tab | space）</span>
indent_size = 2 <span class="token comment"># 缩进大小</span>
end_of_line = lf <span class="token comment"># 控制换行类型(lf | cr | crlf)</span>
trim_trailing_whitespace = true <span class="token comment"># 去除行首的任意空白字符</span>
insert_final_newline = true <span class="token comment"># 始终在文件末尾插入一个新行</span>

<span class="token punctuation">[</span><span class="token important">*.md</span><span class="token punctuation">]</span> <span class="token comment"># 表示仅 md 文件适用以下规则</span>
max_line_length = off
trim_trailing_whitespace = false
</code></pre></div><ul><li>VSCode需要依赖一个插件：EditorConfig for VS Code</li></ul> <p><img src="/Pz-blog/assets/img/image-20220329105508931.c2ae3098.png" alt="image-20220329105508931"></p> <h5 id="_2-1-2-使用prettier工具"><a href="#_2-1-2-使用prettier工具" class="header-anchor">#</a> 2.1.2 使用prettier工具</h5> <ul><li><a href="https://www.prettier.cn/" target="_blank" rel="noopener noreferrer">Prettier<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>  是什么？
<ul><li>代码格式化工具</li></ul></li> <li>安装prettier</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> prettier -D
</code></pre></div><ul><li>在根目录下创建 <strong>.prettierrc</strong> 文件 并配置
<ul><li>seTabs：是否使用tab来缩进，选择false；</li> <li>tabWidth：tab是空格的情况下，是几个空格，选择2个；</li> <li>printWidth：行字符的长度；</li> <li>singleQuote：使用单引号还是双引号，选择true，使用单引号；</li> <li>trailingComma：在多行输入的尾逗号是否添加，设置为 <code>none</code>；</li> <li>semi：语句末尾是否要加分号，默认值true，选择false表示不加；</li></ul></li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;useTabs&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tabWidth&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token property">&quot;printWidth&quot;</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  <span class="token property">&quot;singleQuote&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;trailingComma&quot;</span><span class="token operator">:</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;semi&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>在根目录创建 <strong>.prettierignore</strong> 忽略代码格式化文件</li></ul> <div class="language- extra-class"><pre class="language-text"><code>/dist/*
.local
.output.js
/node_modules/**

**/*.svg
**/*.sh

/public/*
</code></pre></div><ul><li>VSCode需要安装prettier的插件</li></ul> <p><img src="/Pz-blog/assets/img/image-20220329111121514.2d17af50.png" alt="image-20220329111121514"></p> <ul><li>也可在 <strong>package.json</strong> 加入脚本吧所有的代码格式化</li></ul> <div class="language-json extra-class"><pre class="language-json"><code> <span class="token property">&quot;prettier&quot;</span><span class="token operator">:</span> <span class="token string">&quot;prettier --write .&quot;</span>
</code></pre></div><h4 id="_2-2-样式重置配置"><a href="#_2-2-样式重置配置" class="header-anchor">#</a> 2.2 样式重置配置</h4> <ul><li>使用 <a href="http://necolas.github.io/normalize.css/" target="_blank" rel="noopener noreferrer">normalize.css<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 重置样式</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> normalize.css
</code></pre></div><ul><li>在 main.ts 中引入</li></ul> <p><img src="/Pz-blog/assets/img/image-20220329104742804.db3fe486.png" alt="image-20220329104742804"></p> <h3 id="_3、集成pinia"><a href="#_3、集成pinia" class="header-anchor">#</a> 3、集成Pinia</h3> <h4 id="_3-1-pinia-说明"><a href="#_3-1-pinia-说明" class="header-anchor">#</a> 3.1 <a href="https://pinia.vuejs.org/" target="_blank" rel="noopener noreferrer">Pinia<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 说明</h4> <ul><li><a href="https://vuejs.org/guide/scaling-up/state-management.html#pinia" target="_blank" rel="noopener noreferrer">vue 官方说明<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>大致意思就是最开始vue团队成员最开始想探索一下vueX下一次迭代是什么样子，后来意识到 <strong>Pinia</strong> 已经实现了Vuex5想实现的大部分内容， <strong>pinia</strong> 相对于vuex来说提供了更简单使用的 API ，并且提供了 <strong>Composition-API</strong> 风格的 API，最重要的是，在与 <strong>TypeScript 一起使用时具有可靠的类型推断支持</strong>。</li> <li>在 pinia 中没有了vuex 中的 <strong>mutations</strong> 与 <strong>modules</strong>  配置项
<ul><li>state 装载 状态值</li> <li>actions 支持同步和异步</li> <li>getters 接收器</li> <li>推荐 在  actions 更改 state 规范修改的区域</li></ul></li></ul> <h4 id="_3-2-pinia-使用"><a href="#_3-2-pinia-使用" class="header-anchor">#</a> 3.2 <a href="https://pinia.vuejs.org/" target="_blank" rel="noopener noreferrer">Pinia<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>  使用</h4> <h5 id="_3-2-1-安装"><a href="#_3-2-1-安装" class="header-anchor">#</a> 3.2.1 安装</h5> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> pinia
<span class="token comment"># or with npm</span>
<span class="token function">npm</span> <span class="token function">install</span> pinia
</code></pre></div><h5 id="_3-2-2-使用"><a href="#_3-2-2-使用" class="header-anchor">#</a> 3.2.2 使用</h5> <ol><li>在 <strong>main.ts</strong> 中 将 pinia 插件 注册给app</li></ol> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createPinia <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span><span class="token punctuation">;</span><span class="token comment">//引入pinia的创建函数</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">createPinia</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><ol start="2"><li><p>store文件夹下创建</p> <ul><li>store/index.ts</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> useMainStore <span class="token keyword">from</span> <span class="token string">'./main/main'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> useOtherStore <span class="token keyword">from</span> <span class="token string">'./main/other'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> useOtherStore<span class="token punctuation">,</span> useMainStore <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>store/main/main.ts</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">//pinia 去除 mutations，只有 state，getters，actions；</span>
<span class="token comment">//actions 中 可以执行异步与同步 （官方建议在actions中修改state中的值）</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> useOtherStore <span class="token keyword">from</span> <span class="token string">'./other'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token string">'login'</span><span class="token punctuation">,</span> <span class="token comment">// id必填，且需要唯一</span>
  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">'张三'</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  actions<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 修改当前store的name值</span>
    <span class="token function">updateName</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 修改otherStore中的值</span>
    <span class="token function">setOtherName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">useOtherStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">updateOther</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  getters<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 接收器(计算属性)</span>
    <span class="token function-variable function">getNameJoin</span><span class="token operator">:</span> <span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">name</span><span class="token punctuation">(</span>test<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> state<span class="token punctuation">.</span>name <span class="token operator">+</span> test<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><ul><li>store/main/other.ts</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">//测试代表其他状态</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token string">'other'</span><span class="token punctuation">,</span> <span class="token comment">// id必填，且需要唯一</span>
  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">'otherName'</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  actions<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">updateOther</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  getters<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div></li> <li><p>vue页面中显示</p></li></ol> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>main-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>MainStore中的name：{{ mainStore.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>setMainStore<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>测试变化Mainstore<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>OtherStore中的name：{{ otherStore.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>setOtherStore<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">&gt;</span></span>测试利用mainStore中的方法变化otherStore<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span>
    <span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useMainStore<span class="token punctuation">,</span> useOtherStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/store'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取main的状态</span>
    <span class="token keyword">const</span> mainStore <span class="token operator">=</span> <span class="token function">useMainStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> otherStore <span class="token operator">=</span> <span class="token function">useOtherStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> <span class="token function-variable function">setMainStore</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// Pinia的 actions 行为</span>
      mainStore<span class="token punctuation">.</span><span class="token function">updateName</span><span class="token punctuation">(</span><span class="token string">'变化后的mainStore-name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">//动态获取mainStore下的接收器getNameJoin</span>
    <span class="token keyword">const</span> mainStoreJoin <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> mainStore<span class="token punctuation">.</span><span class="token function">getNameJoin</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 利用main中的方法变化other中的值</span>
    <span class="token keyword">const</span> <span class="token function-variable function">setOtherStore</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      mainStore<span class="token punctuation">.</span><span class="token function">setOtherName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span> mainStore<span class="token punctuation">,</span> otherStore<span class="token punctuation">,</span> setOtherStore<span class="token punctuation">,</span> setMainStore<span class="token punctuation">,</span> mainStoreJoin <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h4 id="_3-3-数据持久化"><a href="#_3-3-数据持久化" class="header-anchor">#</a> 3.3 数据持久化</h4> <h5 id="_3-3-1-安装与说明"><a href="#_3-3-1-安装与说明" class="header-anchor">#</a> 3.3.1 安装与说明</h5> <ul><li>使用 <strong>pinia-plugin-persist</strong> 插件辅助数据持久化</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i pinia-plugin-persist --save
</code></pre></div><ul><li><strong>pinia-plugin-persist</strong>  插件会将数据存储在 Session Storage中</li></ul> <p><img src="data:image/png;base64,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" alt="image-20220329160208409"></p> <h5 id="_3-3-2-使用"><a href="#_3-3-2-使用" class="header-anchor">#</a> 3.3.2 使用</h5> <ul><li>需在 <strong>main.ts</strong> 文件中</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> piniaPluginPersist <span class="token keyword">from</span> <span class="token string">'pinia-plugin-persist'</span><span class="token punctuation">;</span> <span class="token comment">//数据持久化 存储在Session Storage</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createPinia <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">createPinia</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>piniaPluginPersist<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//pinia注册piniaPluginPersist插件并注册给app</span>

app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><ul><li>在需要持久化的store中
<ul><li>加入 <strong>persist</strong> 并把 <strong>enabled</strong> 属性值设置为 <strong>true</strong></li></ul></li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">//测试代表其他状态</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token string">'other'</span><span class="token punctuation">,</span> <span class="token comment">// id必填，且需要唯一</span>
  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">'otherName'</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  actions<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">updateOther</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  getters<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 开启数据缓存</span>
  persist<span class="token operator">:</span> <span class="token punctuation">{</span>
    enabled<span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="_4、element-plus"><a href="#_4、element-plus" class="header-anchor">#</a> 4、Element-Plus</h3> <h2 id="三、组件"><a href="#三、组件" class="header-anchor">#</a> 三、组件</h2> <h3 id="_1、异步组件"><a href="#_1、异步组件" class="header-anchor">#</a> 1、异步组件</h3> <p><strong>defineAsyncComponent vue异步组件API</strong></p> <p><strong>问：</strong>  异步组件的应用场景与作用 ？</p> <p><strong>答：</strong></p> <ul><li>异步组件可以让 Vue 第一次渲染时更加快一点</li> <li>对于Webpack 来说 项目打包时，会将这个异步组件打包成一个单独的 js  当使用到时，再去加载这个 js 文件。</li></ul> <p><strong>使用方法</strong></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    App组件
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AsyncCategory</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>AsyncCategory</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineAsyncComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Loading <span class="token keyword">from</span> <span class="token string">&quot;./loading.vue&quot;</span>
<span class="token comment">// 工厂函数</span>
<span class="token comment">// const AsyncCategory = defineAsyncComponent(() =&gt; import(&quot;./AsnycCategory.vue&quot;));//简写</span>
   
<span class="token comment">//对象方式</span>
<span class="token keyword">const</span> AsyncCategory <span class="token operator">=</span> <span class="token function">defineAsyncComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">loader</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;./AsnycCategory.vue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">loadingComponent</span><span class="token operator">:</span>Loading<span class="token punctuation">,</span><span class="token comment">//没有加载出来站位</span>
    <span class="token comment">// errorComponent:'',//组件加载失败显示的组件</span>
    <span class="token literal-property property">delay</span><span class="token operator">:</span><span class="token number">2000</span><span class="token punctuation">,</span><span class="token comment">//在显示loading组件之前,等待多长时间(延迟显示)</span>
   <span class="token comment">/**
   *
   * @param {*} error 错误信息对象
   * @param {*} retry 一个函数，用于指示当 promise 加载器 reject 时，加载器是否应该重试
   * @param {*} fail  一个函数，指示加载程序结束退出
   * @param {*} attempts 允许的最大重试次数
   */</span>
   <span class="token function-variable function">onError</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> retry<span class="token punctuation">,</span> fail<span class="token punctuation">,</span> attempts</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">.</span>message<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">fetch</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> attempts <span class="token operator">&lt;=</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 请求发生错误时重试，最多可尝试 3 次</span>
      <span class="token function">retry</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// 注意，retry/fail 就像 promise 的 resolve/reject 一样：</span>
      <span class="token comment">// 必须调用其中一个才能继续错误处理。</span>
      <span class="token function">fail</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    AsyncCategory<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_2、suspense插槽-处理组件不显示"><a href="#_2、suspense插槽-处理组件不显示" class="header-anchor">#</a> 2、Suspense插槽 处理组件不显示</h3> <p><strong>Suspense vue试验性API 随时修改</strong></p> <p>**问：**Suspense 的应用场景与作用 ？</p> <p><strong>答：</strong></p> <ul><li>可以处理组件如果没有加载出来去显示另一个</li></ul> <p><strong>使用方法 (异步组件为例)</strong></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>suspense</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#default</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- 默认显示 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>todo-list</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#fallback</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- 没有加载到,显示 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        Loading.... <span class="token comment">&lt;!-- 这里也可以放组件 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>suspense</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
   <span class="token keyword">import</span> <span class="token punctuation">{</span> defineAsyncComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span><span class="token comment">//异步组件API</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">TodoList</span><span class="token operator">:</span> <span class="token function">defineAsyncComponent</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./TodoList.vue'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h3 id="_3、组件之间的v-model"><a href="#_3、组件之间的v-model" class="header-anchor">#</a> 3、组件之间的v-model</h3> <p>**问：**组件之间的v-model 的应用场景与作用 ？</p> <p><strong>答：</strong></p> <ul><li>应用场景多了去了 , 作用大了去了 , 封装个组件不要双向绑定嘛, <strong>擦</strong></li></ul> <p><strong>使用方法 ( 利用v-model标签上隐性绑定的update:name方法 )</strong></p> <ul><li><strong>父组件</strong></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>{{ message }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>{{ title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hy-input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>message<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">v-model:</span>title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>hy-input</span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!-- 这里默认会绑定 update:modelValue update:title 两个事件等同于下边的举例--&gt;</span>
     <span class="token comment">&lt;!--    &lt;hy-input v-model=&quot;message&quot; v-model:title=&quot;title&quot; @update:modelValue=&quot;message=$event&quot; @update:title=&quot;title=$event&quot;&gt;&lt;/hy-input&gt; --&gt;</span>
      

     
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> HyInput <span class="token keyword">from</span> <span class="token string">&quot;./HyInput.vue&quot;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">components</span><span class="token operator">:</span><span class="token punctuation">{</span>
        HyInput
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&quot;lpz&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">'哈哈哈'</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>


</code></pre></div><ul><li><strong>子组件</strong></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code>#子组件
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>我是传进来的：{{ modelValue }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>value<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">modelValue</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">emits</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;update:modelValue&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;update:title&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment">//注册自定义事件</span>
  <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token comment">//利用computed显示(get)与调用自定义事件(set)</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">set</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&quot;update:modelValue&quot;</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>modelValue<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">title1</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">set</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&quot;update:title&quot;</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>title<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="四、两种setup使用"><a href="#四、两种setup使用" class="header-anchor">#</a> 四、两种setup使用</h2> <h3 id="_1、函数式-setup"><a href="#_1、函数式-setup" class="header-anchor">#</a> 1、函数式 setup</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">&quot;ts&quot;</span><span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> computed<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/store'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> usePermission <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/hooks/use-permission'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> HyTable <span class="token keyword">from</span> <span class="token string">'@/base-ui/table'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">//定义组件</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    HyTable
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">//props使用</span>
    <span class="token literal-property property">contentTableConfig</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Object<span class="token punctuation">,</span>
      <span class="token literal-property property">require</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">pageName</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">emits</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'newBtnClick'</span><span class="token punctuation">,</span> <span class="token string">'editBtnClick'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//emits事件</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> <span class="token punctuation">{</span> emit <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//在这里拿到props与emit</span>
    <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      store
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><h3 id="_2、script-setup"><a href="#_2、script-setup" class="header-anchor">#</a> 2、script setup</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">&quot;ts&quot;</span> setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> onMounted<span class="token punctuation">,</span>defineProps<span class="token punctuation">,</span> withDefaults<span class="token punctuation">,</span><span class="token comment">/*设置props默认值*/</span> watchEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> EChartsOption <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'echarts'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> useEchart <span class="token keyword">from</span> <span class="token string">'../hooks/useEchart'</span><span class="token punctuation">;</span>
<span class="token comment">//withDefaults 第一个参数为props 第二个为props中的默认值 并且会返回出来一个props可以使用返回值获取props中的值</span>
<span class="token comment">// defineProps 定于propsdefineProps&lt;{}&gt;()</span>
<span class="token comment">// 定义props</span>
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">withDefaults</span><span class="token punctuation">(</span>
  defineProps<span class="token operator">&lt;</span><span class="token punctuation">{</span>
    <span class="token literal-property property">options</span><span class="token operator">:</span> EChartsOption<span class="token punctuation">;</span>
    width<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">;</span><span class="token comment">//设置是否必传(?)</span>
    height<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token string">'100%'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token string">'360px'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> echartDivRef <span class="token operator">=</span> ref<span class="token operator">&lt;</span>HTMLElement<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> setOptions <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useEchart</span><span class="token punctuation">(</span>echartDivRef<span class="token punctuation">.</span>value<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setOptions</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><h3 id="_3、两者差异"><a href="#_3、两者差异" class="header-anchor">#</a> 3、两者差异</h3> <h2 id="五、基础api"><a href="#五、基础api" class="header-anchor">#</a> 五、基础Api</h2> <h3 id="_1、customref-自定义ref"><a href="#_1、customref-自定义ref" class="header-anchor">#</a> 1、customRef（自定义ref）</h3> <ul><li>自定义ref防抖事件</li></ul> <p><strong>customRef 有两个参数，并且返回一个对象，对象中必须有set与get函数</strong></p> <ul><li>track 搜集依赖</li> <li>trigger 触发更新</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> customRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 自定义ref</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token comment">// track 搜集依赖</span>
  <span class="token comment">// trigger 触发更新</span>
  <span class="token keyword">return</span> <span class="token function">customRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">track<span class="token punctuation">,</span> trigger</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">track</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> value<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//延迟一秒更新数据</span>
        <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          value <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
          <span class="token function">trigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//使用</span>
<span class="token keyword">import</span> debounceRef <span class="token keyword">from</span> <span class="token string">&quot;./hook/useDebounceRef.js&quot;</span>
<span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token function">debounceRef</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      message<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="_2、computed使用"><a href="#_2、computed使用" class="header-anchor">#</a> 2、computed使用</h3> <p><strong>computed本身返回的是一个ref对象</strong></p> <ul><li>实例</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> fullName <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;changeName&quot;</span><span class="token operator">&gt;</span>修改firstName<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> fristName <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;Kobe&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> lastName <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;Bryant&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//1.直接返回值</span>
    <span class="token comment">// const fullName = computed(() =&gt; fristName.value + &quot; &quot; + lastName.value);</span>
    <span class="token comment">//2.传入对象设置set，get</span>
    <span class="token keyword">const</span> fullName <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> fristName<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> lastName<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
      <span class="token function">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> names <span class="token operator">=</span> newValue<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        fristName<span class="token punctuation">.</span>value <span class="token operator">=</span> names<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        lastName<span class="token punctuation">.</span>value <span class="token operator">=</span> names<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> <span class="token function-variable function">changeName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">//   fristName.value = &quot;James&quot;;</span>
      fullName<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;code why&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      fullName<span class="token punctuation">,</span>
      changeName<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="_3、watch的使用"><a href="#_3、watch的使用" class="header-anchor">#</a> 3、watch的使用</h3> <h3 id="两种监听模式"><a href="#两种监听模式" class="header-anchor">#</a> 两种监听模式</h3> <h4 id="_1-watcheffect-自动搜集响应式依赖"><a href="#_1-watcheffect-自动搜集响应式依赖" class="header-anchor">#</a> 1. watchEffect 自动搜集响应式依赖</h4> <p><strong>弊端：</strong></p> <p>第一次一定会执行，因为会去查找内部有些哪些需要监听的值</p> <ul><li>当前函数会在最开始立即执行一次，并且在立即执行的同时会去查找函数内使用了哪些值，并监听他们</li></ul> <p><strong>使用:</strong></p> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>name<span class="token operator">-</span><span class="token punctuation">{</span><span class="token punctuation">{</span> name <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>age<span class="token operator">-</span><span class="token punctuation">{</span><span class="token punctuation">{</span> age <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;changeName&quot;</span><span class="token operator">&gt;</span>nameChange<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;changeAge&quot;</span><span class="token operator">&gt;</span>AgeChange<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>


<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> watchEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;why&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">changeName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>name<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;kobe&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">changeAge</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> age<span class="token punctuation">.</span>value<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
        <span class="token string">&quot;watchEffect-changeName&quot;</span><span class="token punctuation">,</span>
        name<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
        <span class="token string">&quot;watchEffect-changeAge&quot;</span><span class="token punctuation">,</span>
        age<span class="token punctuation">.</span>value
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      name<span class="token punctuation">,</span>
      age<span class="token punctuation">,</span>
      changeName<span class="token punctuation">,</span>
      changeAge<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="watcheffect-的停止侦听"><a href="#watcheffect-的停止侦听" class="header-anchor">#</a> watchEffect 的停止侦听</h5> <ul><li>watchEffect 返回的是一个函数,调用即可停止监听</li></ul> <p><strong>使用：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token keyword">const</span> shop <span class="token operator">=</span>   <span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
        <span class="token string">&quot;watchEffect-changeName&quot;</span><span class="token punctuation">,</span>
        name<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
        <span class="token string">&quot;watchEffect-changeAge&quot;</span><span class="token punctuation">,</span>
        age<span class="token punctuation">.</span>value
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">const</span> <span class="token function-variable function">changeAge</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
       age<span class="token punctuation">.</span>value<span class="token operator">++</span><span class="token punctuation">;</span>
       <span class="token keyword">if</span><span class="token punctuation">(</span>age<span class="token punctuation">.</span>value<span class="token operator">&gt;</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
         <span class="token function">shop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
       <span class="token punctuation">}</span>
     <span class="token punctuation">}</span>
</code></pre></div><h5 id="清除watcheffect副作用"><a href="#清除watcheffect副作用" class="header-anchor">#</a> 清除watchEffect副作用</h5> <p><strong>什么是副作用：</strong></p> <p>例：监听一个值的变化来发送网络请求，多次变化上一次数据没有回来就发送了第二个请求，这个过程就叫 <code>watchEffect副作用</code></p> <p><strong>使用：</strong></p> <ol><li>可以用wacthEffect返回值清空所有</li> <li>也可以根据情况自己封装</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">const</span> shop <span class="token operator">=</span> <span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">test</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 根据name和age两个变量发送网络请求</span>
      <span class="token keyword">const</span> timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;模拟网络请求&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
         <span class="token comment">//只要是组件销毁便会执行</span>
        <span class="token comment">// 在这里清楚无用的副作用</span>
        <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
        <span class="token string">&quot;watchEffect-changeName&quot;</span><span class="token punctuation">,</span>
        name<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
        <span class="token string">&quot;watchEffect-changeAge&quot;</span><span class="token punctuation">,</span>
        age<span class="token punctuation">.</span>value
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">changeAge</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      age<span class="token punctuation">.</span>value<span class="token operator">++</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>age<span class="token punctuation">.</span>value <span class="token operator">&gt;</span> <span class="token number">25</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">shop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="watcheffect-第二个参数"><a href="#watcheffect-第二个参数" class="header-anchor">#</a> watchEffect 第二个参数</h5> <ul><li>第二个参数是来控制 watchEffect 的立即监听</li></ul> <p><strong>例子：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">const</span> title <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>title<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
      <span class="token literal-property property">flush</span><span class="token operator">:</span><span class="token string">&quot;post&quot;</span>
      <span class="token comment">// flush:'post'</span>

      <span class="token comment">// // flush:&quot;sync&quot;</span>

    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
     title<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_2-watch-指定侦听"><a href="#_2-watch-指定侦听" class="header-anchor">#</a> 2. watch 指定侦听</h4> <ul><li>watch 的参数
<ul><li>第一个参数为监听的对象
<ul><li>可多个侦听，传入数组</li></ul></li> <li>第二个参数为回调函数</li> <li>第三个参数为配置
<ul><li><code>deep</code> 深度侦听</li> <li><code>immediate</code> 立即执行</li></ul></li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">// 1.定义可响应对象</span>
    <span class="token keyword">const</span> info <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;why&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
      <span class="token literal-property property">friend</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;kobe&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 2.侦听器watch</span>
    <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token operator">...</span>info<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span> oldValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;newValue:&quot;</span><span class="token punctuation">,</span> newValue<span class="token punctuation">,</span> <span class="token string">&quot;oldValue:&quot;</span><span class="token punctuation">,</span> oldValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
      <span class="token literal-property property">deep</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//深度侦听</span>
      <span class="token literal-property property">immediate</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token comment">//立即执行</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> <span class="token function-variable function">changeInfo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      info<span class="token punctuation">.</span>friend<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;lpz&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_4、在setup中使用ref"><a href="#_4、在setup中使用ref" class="header-anchor">#</a> 4、在setup中使用ref</h3> <ul><li>在<code>setup</code>中定义一个<code>ref</code>对象</li> <li>并设置给行内元素的<code>ref</code>即可</li></ul> <p><strong>示例</strong></p> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token operator">&lt;</span>h2 ref<span class="token operator">=</span><span class="token string">&quot;title&quot;</span><span class="token operator">&gt;</span>哈哈哈<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> watchEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

 <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> title <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>title<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
      <span class="token literal-property property">flush</span><span class="token operator">:</span><span class="token string">&quot;post&quot;</span><span class="token comment">//第一次不监听/不然第一次是null</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
     title<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="_5、render函数与h函数"><a href="#_5、render函数与h函数" class="header-anchor">#</a> 5、render函数与h函数</h3> <p><strong>render函数为渲染函数，使用render时不需要template模板</strong></p> <p><strong>h函数为渲染每一个节点函数，并且有三个参数</strong></p> <ul><li>第一个参数为节点名称(<code>必须</code>) 例如 ： div h2 span</li> <li>第二个参数为节点的属性(<code>可选官方建议如果没有就传null</code>)，例如class、点击事件、属性</li> <li>第三个参数为子节点(<code>可选</code>) 可嵌套</li></ul> <p><strong>实例：render与h函数的基本使用</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>  h <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
   <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&quot;h2&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token keyword">class</span><span class="token operator">:</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;Hello Render&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>实例：实现计数器（也可以放在setup返回值,setup返回一个函数）</strong></p> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> counter <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// return {</span>
    <span class="token comment">//   counter,</span>
    <span class="token comment">// };</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token keyword">class</span><span class="token operator">:</span> <span class="token string">&quot;app&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
      <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&quot;h2&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">当前计数：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>counter<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function">h</span><span class="token punctuation">(</span>
        <span class="token string">&quot;button&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> counter<span class="token punctuation">.</span>value<span class="token operator">++</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;+1&quot;</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function">h</span><span class="token punctuation">(</span>
        <span class="token string">&quot;button&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> counter<span class="token punctuation">.</span>value<span class="token operator">--</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;-1&quot;</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">//   render() {</span>
<span class="token comment">//     return h(&quot;div&quot;, { class: &quot;app&quot; }, [</span>
<span class="token comment">//       h(&quot;h2&quot;, null, `当前计数：${this.counter}`),</span>
<span class="token comment">//       h(</span>
<span class="token comment">//         &quot;button&quot;,</span>
<span class="token comment">//         {</span>
<span class="token comment">//           onClick: () =&gt; this.counter++,</span>
<span class="token comment">//         },</span>
<span class="token comment">//         &quot;+1&quot;</span>
<span class="token comment">//       ),</span>
<span class="token comment">//       h(</span>
<span class="token comment">//         &quot;button&quot;,</span>
<span class="token comment">//         {</span>
<span class="token comment">//           onClick: () =&gt; this.counter--,</span>
<span class="token comment">//         },</span>
<span class="token comment">//         &quot;-1&quot;</span>
<span class="token comment">//       ),</span>
<span class="token comment">//     ]);</span>
<span class="token comment">//   },</span>
</code></pre></div><p><strong>实例：使用插槽</strong></p> <ul><li>App.vue</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> h<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> HelloWorld <span class="token keyword">from</span> <span class="token string">&quot;./HelloWorld.vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span>HelloWorld<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&quot;span&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">我是传入的插槽 插槽的参数</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>props<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//props中装载着传过来的值</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>HelloWorld.vue</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">import</span> <span class="token punctuation">{</span> h<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
      <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&quot;h2&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$slots<span class="token punctuation">.</span>default
        <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$slots<span class="token punctuation">.</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;lpz&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment">//这里可以传值给app.vue</span>
        <span class="token operator">:</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&quot;span&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;我是HelloWorld的默认值&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//这里收集插槽，如果有名字为default的插槽就使用插槽,否则输出一个span</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_6、directives-自定义指令"><a href="#_6、directives-自定义指令" class="header-anchor">#</a> 6、directives(自定义指令)</h3> <h4 id="_1-基本使用"><a href="#_1-基本使用" class="header-anchor">#</a> 1. 基本使用</h4> <p><strong>说明：</strong></p> <p>自定义指令的生命周期中都传入了四个参数</p> <ul><li>第一个参数：<code>el</code>   当前<code>Dom</code>元素</li> <li>第二个参数为：<code>bindings</code> 装载自定义指令的传值与修饰符
<ul><li>其中：value为传入的值</li> <li>modifiers 为修饰符，</li></ul></li> <li>第三个参数为虚拟节点 <code>vnode</code></li> <li>第四个参数为前一个虚拟节点 <code>preVnode</code></li></ul> <h5 id="局部自定义指令"><a href="#局部自定义指令" class="header-anchor">#</a> 局部自定义指令</h5> <ul><li>局部自定义指令设置在每一个单独的组件中</li> <li>自定义指令,第一个参数为名字,第二个为回调函数</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button
      v<span class="token operator">-</span>button<span class="token punctuation">.</span>aaa<span class="token punctuation">.</span>bbb<span class="token operator">=</span><span class="token string">&quot;'自定义指令传值'&quot;</span>
      v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;counter &lt; 3&quot;</span>
      @click<span class="token operator">=</span><span class="token string">&quot;increment&quot;</span>
    <span class="token operator">&gt;</span>
      <span class="token literal-property property">计数器</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">{</span> counter <span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">directives</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">//局部动态自定义指令</span>
    <span class="token literal-property property">button</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">created</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> bindings<span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> preVnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// bindings 为自定义指令传值与修饰符的容器</span>
        <span class="token comment">//value 为传入的数据 </span>
        <span class="token comment">// modifiers 为修饰符 会为true</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;modifiers&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;created&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bindings<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">beforeMount</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> bindings<span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> preVnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;beforeMount&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> bindings<span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> preVnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;beforeMount&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">beforeUpdate</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> bindings<span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> preVnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;beforeUpdate&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">updated</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> bindings<span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> preVnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;updated&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">beforeUnmount</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> bindings<span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> preVnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;beforeUnmount&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">unmounted</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> bindings<span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> preVnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;unmounted&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> counter <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">increment</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      counter<span class="token punctuation">.</span>value<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      counter<span class="token punctuation">,</span>
      increment<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><h5 id="全局自定义指令"><a href="#全局自定义指令" class="header-anchor">#</a> 全局自定义指令</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">&quot;focus&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">//全局自定义指令,第一个参数为名字,第二个为回调函数</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> bindings<span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> preVnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    el<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="封装全局数据格式化"><a href="#封装全局数据格式化" class="header-anchor">#</a> 封装全局数据格式化</h5> <p><strong>可用于需要统一理的数据</strong></p> <p><img src="/Pz-blog/assets/img/image-20211007142318140.364117ed.png" alt="image-20211007142318140"></p> <h4 id="_2-指令的生命周期"><a href="#_2-指令的生命周期" class="header-anchor">#</a> 2. 指令的生命周期</h4> <p><img src="/Pz-blog/assets/img/image-20211007130728367.5642e01b.png" alt="image-20211007130728367"></p> <h3 id="_7、teleport-template插入到指定容器中"><a href="#_7、teleport-template插入到指定容器中" class="header-anchor">#</a> 7、teleport（template插入到指定容器中）</h3> <p><strong>作用：将元素插入到指定容器中</strong></p> <ul><li>app.vue</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>teleport to<span class="token operator">=</span><span class="token string">&quot;#lpz&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>teleport<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>插入到id为lpz的容器中<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>teleport<span class="token operator">&gt;</span>
         <span class="token operator">&lt;</span>teleport to<span class="token operator">=</span><span class="token string">&quot;#lpz&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>追加<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>teleport<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre></div><ul><li>index.html</li></ul> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;lpz&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre></div><p><strong>效果</strong></p> <p><img src="/Pz-blog/assets/img/image-20211007145028270.c7be895a.png" alt="image-20211007145028270"></p> <h3 id="_8、全局注册插件-app-use"><a href="#_8、全局注册插件-app-use" class="header-anchor">#</a> 8、全局注册插件(app.use())</h3> <p><strong>说明：</strong></p> <p>全局注册插件</p> <ul><li>对象形式
<ul><li>会去调用对象中的<code>install</code>方法并且传入app实例</li></ul></li> <li>函数形式
<ul><li>注册函数插件直接将app传给函数</li> <li>并且可以使用 全局<code>mixin</code>、<code>component</code>等事件</li></ul></li></ul> <p><strong>mian.js</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> pluginsObject <span class="token keyword">from</span> <span class="token string">&quot;./plugins/plugins_object.js&quot;</span>
<span class="token keyword">import</span> pluginsFuntion <span class="token keyword">from</span> <span class="token string">&quot;./plugins/plugins_Funtion.js&quot;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>pluginsObject<span class="token punctuation">)</span><span class="token comment">//这里注册插件其实直接会调用里边的install方法,并且转入app</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>pluginsFuntion<span class="token punctuation">)</span><span class="token comment">//注册函数插件直接将app传给函数</span>
</code></pre></div><p><strong>lugins_object.js</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">install</span><span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">;</span>
    app<span class="token punctuation">.</span>config<span class="token punctuation">.</span>globalProperties<span class="token punctuation">.</span>$name <span class="token operator">=</span> <span class="token string">&quot;lpz&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><p><strong>plugins_Funtion.js</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre></div><p><strong>在组件中使用全局属性</strong></p> <ul><li>setup</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>getCurrentInstance<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token comment">//获取组件实例 </span>
<span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token function">getCurrentInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//获取组件实例</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>appContext<span class="token punctuation">.</span>config<span class="token punctuation">.</span>globalProperties<span class="token punctuation">.</span>$name<span class="token punctuation">)</span><span class="token comment">//setup获取全局注册实例属性</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>

</code></pre></div><ul><li>vue2</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>        <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$name<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h2 id="六、vue中认识jsx"><a href="#六、vue中认识jsx" class="header-anchor">#</a> 六、Vue中认识jsx</h2> <h3 id="_1、基本使用"><a href="#_1、基本使用" class="header-anchor">#</a> 1、基本使用</h3> <p><strong>目前VueCli 4.5.0 已经默认支持jsx</strong></p> <ul><li>App.vue</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>ref<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span>
<span class="token keyword">import</span> HelloWorld <span class="token keyword">from</span> <span class="token string">&quot;./HelloWorld.vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> counter <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span><span class="token punctuation">{</span>
            counter
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token function-variable function">increment</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>counter<span class="token operator">++</span>
      <span class="token keyword">const</span> <span class="token function-variable function">decrement</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>counter<span class="token operator">--</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
       <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
         <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>当前计数 <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>counter<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
         <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>increment<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>decrement<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>HelloWorld<span class="token operator">&gt;</span>
          <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token function-variable function">default</span><span class="token operator">:</span><span class="token parameter">props</span><span class="token operator">=&gt;</span><span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>我是传入的数据插槽<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>HelloWorld<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style scoped<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre></div><ul><li>HelloWorld.vue</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>Hello World<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>$slots<span class="token punctuation">.</span>default<span class="token operator">?</span><span class="token keyword">this</span><span class="token punctuation">.</span>$slots<span class="token punctuation">.</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>哈哈哈<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style scoped<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre></div><h2 id="七、vuex五大核心"><a href="#七、vuex五大核心" class="header-anchor">#</a> 七、VueX五大核心</h2> <h3 id="_1、state"><a href="#_1、state" class="header-anchor">#</a> 1、state</h3> <h3 id="_2、getters"><a href="#_2、getters" class="header-anchor">#</a> 2、getters</h3> <h2 id="八、typescript-与-vue3"><a href="#八、typescript-与-vue3" class="header-anchor">#</a> 八、TypeScript 与 Vue3</h2> <h3 id="_1、类型"><a href="#_1、类型" class="header-anchor">#</a> 1、类型</h3> <h4 id="_1-1-ref-获取组件-instancetype"><a href="#_1-1-ref-获取组件-instancetype" class="header-anchor">#</a> 1.1 ref () 获取组件   InstanceType</h4> <blockquote><p>利用 InstanceType (实例类型) 来获取拥有构造函数的实例</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token operator">&lt;</span>login<span class="token operator">-</span>account ref<span class="token operator">=</span><span class="token string">&quot;accountRef&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token comment">//组件</span>

    <span class="token comment">//使用ref获取组件实例</span>

<span class="token keyword">const</span> accountRef <span class="token operator">=</span> ref<span class="token operator">&lt;</span>InstanceType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> LoginAccount<span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_1-2-使用-vuex-usestore"><a href="#_1-2-使用-vuex-usestore" class="header-anchor">#</a> 1.2 使用 Vuex useStore *</h4> <p><strong>问题：</strong></p> <blockquote><p>因 vuex 对 typeScript 支持不友好，在vuex的useStore中的类型为any 并没有类型检测，如下：</p></blockquote> <p><img src="/Pz-blog/assets/img/image-20220116125414319.b2269327.png" alt="image-20220116125414319"></p> <p><strong>解决问题：</strong></p> <blockquote><p>处理 <strong>useStore</strong> ， 在store的index.ts中导出一个函数替换useStore</p></blockquote> <p><img src="/Pz-blog/assets/img/image-20220116125756965.0e416ffb.png" alt="image-20220116125756965"></p> <p><img src="/Pz-blog/assets/img/image-20220116130212788.6657e643.png" alt="image-20220116130212788"></p> <p><strong>结果：</strong></p> <h3 id="_2、router"><a href="#_2、router" class="header-anchor">#</a> 2、router</h3> <h4 id="_2-1-动态路由创建文件"><a href="#_2-1-动态路由创建文件" class="header-anchor">#</a> 2.1 动态路由创建文件</h4> <blockquote><p>避免手动创建文件 与 router 映射 使用 corderwhy 的工具</p></blockquote> <ol><li><strong>安装工具</strong></li></ol> <p>npm工具名称 : **“corderwhy” **</p> <div class="language-cmd extra-class"><pre class="language-text"><code>npm install corderwhy
</code></pre></div><ol start="2"><li>**使用 **</li></ol> <div class="language-cmd extra-class"><pre class="language-text"><code>#这里的文件路径与路由路径一致，(建议与接口返回路径一致)

coderthy add3page 文件名称 -d 文件路径
coderwhy add3page test -d src/views/main/test

</code></pre></div><ol start="3"><li><strong>结果</strong></li></ol> <blockquote><p>会根据命令创建出不同的 路由 与 vue文件 （并有相应代码）</p></blockquote> <p><img src="/Pz-blog/assets/img/image-20220116142744756.a90838b3.png" alt="image-20220116142744756"></p> <h4 id="_2-2-require-context-加载文件使用"><a href="#_2-2-require-context-加载文件使用" class="header-anchor">#</a> 2.2 require.context 加载文件使用</h4> <blockquote><p><strong>require.context</strong> 是 <strong>webpack</strong> 中的方法，可加载上下文 文件</p></blockquote> <ol><li><strong>使用方法</strong></li></ol> <blockquote><p>1、<strong>require.context</strong>(查找的文件夹路径, 是否进行递归查找, 匹配的文件（正则）)</p> <p>2、使用 <strong>routeFiles.keys()</strong> 获取加载到的所有文件</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">const</span> routeFiles <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">'../router/main'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.ts</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// console.log(routeFiles.keys());</span>

<span class="token function">获取到</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>router<span class="token operator">/</span>main<span class="token punctuation">)</span>相对路径
<span class="token comment">//[&quot;./analysis/dashboard/dashboard.ts&quot;,&quot;./analysis/overview/overview.ts&quot;]</span>
</code></pre></div><h4 id="_2-3-实现动态路由"><a href="#_2-3-实现动态路由" class="header-anchor">#</a> 2.3 实现动态路由</h4> <p><strong>注意：</strong></p> <ul><li>动态路由中 <strong>el-menu</strong> 组件用的是后台传回来的数组(store.state.login.userMenus)</li></ul> <p>大致结构：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">38</span><span class="token punctuation">,</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;系统总览&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/main/analysis&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;el-icon-monitor&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;sort&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">&quot;children&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">39</span><span class="token punctuation">,</span>
                <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/main/analysis/overview&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;核心技术&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;sort&quot;</span><span class="token operator">:</span> <span class="token number">106</span><span class="token punctuation">,</span>
                <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
                <span class="token property">&quot;children&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
                <span class="token property">&quot;parentId&quot;</span><span class="token operator">:</span> <span class="token number">38</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;商品中心&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/main/product&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;el-icon-goods&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;sort&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">&quot;children&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span>
                <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/main/product/category&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;商品类别&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;sort&quot;</span><span class="token operator">:</span> <span class="token number">104</span><span class="token punctuation">,</span>
                <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
                <span class="token property">&quot;children&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span>
                        <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
                        <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
                        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;创建类别&quot;</span><span class="token punctuation">,</span>
                        <span class="token property">&quot;sort&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
                        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                        <span class="token property">&quot;parentId&quot;</span><span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span>
                        <span class="token property">&quot;permission&quot;</span><span class="token operator">:</span> <span class="token string">&quot;system:category:create&quot;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token property">&quot;parentId&quot;</span><span class="token operator">:</span> <span class="token number">9</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
 
<span class="token punctuation">]</span>
</code></pre></div><blockquote><p>map-menus.ts 文件</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> RouteRecordRaw <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span><span class="token punctuation">;</span>
<span class="token comment">// allRoutes为所有的 userMenus为请求回来的</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">mapMenusToRoutes</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">userMenus</span><span class="token operator">:</span> any<span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span><span class="token operator">:</span> RouteRecordRaw<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token literal-property property">routes</span><span class="token operator">:</span> RouteRecordRaw<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token comment">// 1.先去加载默认所有的routes</span>
  <span class="token keyword">const</span> <span class="token literal-property property">allRoutes</span><span class="token operator">:</span> RouteRecordRaw<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">// require.context加载文件夹</span>
  <span class="token comment">// require.context(文件夹路径, 是否进行递归查找, 匹配的文件)</span>
  <span class="token comment">// const routeFiles = require.context('../router/main', true, /\.ts$/);//以ts结尾</span>
  <span class="token keyword">const</span> routeFiles <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">'../router/main'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.ts</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//.ts/.tsx</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>routeFiles<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 使用keys获取值</span>
  routeFiles<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 循环获取单个文件(因获取的是相对路径所以使用 . 来切割)</span>
    <span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../router/main'</span> <span class="token operator">+</span> key<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// route.default获取的就是route对象了</span>
    allRoutes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>default<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>allRoutes<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 2.根据菜单获取需要添加的routes</span>
  <span class="token comment">// userMenus:</span>
  <span class="token comment">// type === 1 -&gt; children -&gt; type === 1</span>
  <span class="token comment">// type === 2 -&gt; url -&gt; route</span>
  <span class="token keyword">const</span> <span class="token function-variable function">_recurseGetRoute</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">menus</span><span class="token operator">:</span> any<span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> menu <span class="token keyword">of</span> menus<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>menu<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>menu<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">const</span> route <span class="token operator">=</span> allRoutes<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">route</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> route<span class="token punctuation">.</span>path <span class="token operator">===</span> menu<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>route<span class="token punctuation">)</span> routes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>route<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">_recurseGetRoute</span><span class="token punctuation">(</span>menu<span class="token punctuation">.</span>children<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">_recurseGetRoute</span><span class="token punctuation">(</span>userMenus<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> routes<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><blockquote><p>vuex store 文件</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> mapMenusToRoutes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/utils/map-menus'</span><span class="token punctuation">;</span>  
<span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">changeUserMenus</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> <span class="token literal-property property">userMenus</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>userMenus <span class="token operator">=</span> userMenus<span class="token punctuation">;</span>

      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'注册动态路由'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// userMenus =&gt; routes</span>
      <span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token function">mapMenusToRoutes</span><span class="token punctuation">(</span>userMenus<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// 将routes =&gt; router.main.children</span>
      routes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">route</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 添加到main路径下</span>
        router<span class="token punctuation">.</span><span class="token function">addRoute</span><span class="token punctuation">(</span><span class="token string">'main'</span><span class="token punctuation">,</span> route<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h4 id="_2-4-路由注册执行顺序"><a href="#_2-4-路由注册执行顺序" class="header-anchor">#</a> 2.4 路由注册执行顺序</h4> <p><img src="/Pz-blog/assets/img/image-20220121121703169.65a2922f.png" alt="image-20220121121703169"></p> <h3 id="_3、组件中的双向绑定"><a href="#_3、组件中的双向绑定" class="header-anchor">#</a> 3、组件中的双向绑定</h3> <h4 id="_3-1-方式"><a href="#_3-1-方式" class="header-anchor">#</a> 3.1 方式</h4> <h5 id="_3-1-1-子组件使用v-bind直接修改props-不推荐"><a href="#_3-1-1-子组件使用v-bind直接修改props-不推荐" class="header-anchor">#</a> 3.1.1 子组件使用v-bind直接修改props(不推荐)</h5> <p><strong>不推荐原因</strong></p> <blockquote><p>Vue设计原则为单项数据留，建议不要子组件直接修改 <strong>props</strong></p> <p>eslint 也会报错如下</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>Unexpected mutation <span class="token keyword">of</span> <span class="token string">&quot;formData&quot;</span> prop<span class="token punctuation">.</span>eslintvue<span class="token operator">/</span>no<span class="token operator">-</span>mutating<span class="token operator">-</span>props
<span class="token comment">// no-mutating-props: 不要变化props</span>
“formData”prop<span class="token punctuation">.</span>eslintvue<span class="token operator">/</span>no<span class="token operator">-</span>mutating<span class="token operator">-</span>props的意外突变
</code></pre></div><p><strong>使用方案</strong></p> <div class="language-typescript extra-class"><pre class="language-typescript"><code> <span class="token comment">//子组件    formData为数据 searchFormConfig为动态绑定配置文件</span>
<span class="token operator">&lt;</span>hy<span class="token operator">-</span>form v<span class="token operator">-</span>bind<span class="token operator">=</span><span class="token string">&quot;searchFormConfig&quot;</span> <span class="token operator">:</span>formData<span class="token operator">=</span><span class="token string">&quot;formData&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token comment">//父组件</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      id<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      passwor<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      sport<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      createTime<span class="token operator">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      formData<span class="token punctuation">,</span>
      searchFormConfig
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token comment">//传给组件配置文件</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> IForm <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/base-ui/form'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> searchFormConfig<span class="token operator">:</span> IForm <span class="token operator">=</span> <span class="token punctuation">{</span>
  formItems<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      field<span class="token operator">:</span> <span class="token string">'id'</span><span class="token punctuation">,</span><span class="token comment">//这里为绑定model</span>
      type<span class="token operator">:</span> <span class="token string">'input'</span><span class="token punctuation">,</span>
      label<span class="token operator">:</span> <span class="token string">'id'</span><span class="token punctuation">,</span>
      placeholder<span class="token operator">:</span> <span class="token string">'请输入id'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//子组件使用</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    formData<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> Object<span class="token punctuation">,</span>
      required<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>

  <span class="token operator">&lt;</span>el<span class="token operator">-</span>input
    <span class="token operator">:</span>placeholder<span class="token operator">=</span><span class="token string">&quot;item.placeholder&quot;</span>
    v<span class="token operator">-</span>bind<span class="token operator">=</span><span class="token string">&quot;item.otherOptions&quot;</span>
    <span class="token operator">:</span>show<span class="token operator">-</span>password<span class="token operator">=</span><span class="token string">&quot;item.type === 'password'&quot;</span>
    v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;formData[`${item.field}`]&quot;</span><span class="token comment">//用配置文件的field绑定formData中的字段</span>
  <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><p><strong>实现成果</strong></p> <p><img src="/Pz-blog/assets/img/image-20220122151442939.60f08a40.png" alt="image-20220122151442939"></p> <h5 id="_3-1-2-使用组件双向绑定-v-model-modelvalue-误区"><a href="#_3-1-2-使用组件双向绑定-v-model-modelvalue-误区" class="header-anchor">#</a> 3.1.2 使用组件双向绑定 v-model modelValue (误区)</h5> <p><strong>使用方案</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//将动态绑定修改为v-mode (组件双向绑定)</span>
<span class="token comment">//&lt;hy-form v-bind=&quot;searchFormConfig&quot; :formData=&quot;formData&quot; /&gt;</span>
<span class="token comment">//这里其实跟3.1.1的思路是相同的 用 :modelValue=&quot;formData&quot; 也是一样的结果</span>
<span class="token operator">&lt;</span>hy<span class="token operator">-</span>form v<span class="token operator">-</span>bind<span class="token operator">=</span><span class="token string">&quot;searchFormConfig&quot;</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;formData&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token comment">//子组件</span>
     <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">modelValue</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Object<span class="token punctuation">,</span>
      <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token punctuation">}</span>
<span class="token comment">//发出事件 updata:modelValue (可随意修改)</span>
 <span class="token literal-property property">emits</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'update:modelValue'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> <span class="token punctuation">{</span> emit <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//计算属性 双向绑定</span>
    <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> props<span class="token punctuation">.</span>modelValue<span class="token punctuation">,</span><span class="token comment">//获取</span>
      <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">newValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token comment">//设置</span>
  # 并且这里并没有调用 
  			concsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'-------'</span><span class="token punctuation">)</span>
        <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'update:modelValue'</span><span class="token punctuation">,</span> newValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      formData
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><h5 id="_3-1-3-使用v-model并使用watch监听-正确用法"><a href="#_3-1-3-使用v-model并使用watch监听-正确用法" class="header-anchor">#</a> 3.1.3 使用v-model并使用watch监听(正确用法)</h5> <p><strong>使用方案</strong></p> <blockquote><p>遵循 <strong>Vue</strong> 单向数据流规则 使用 **emit ** 发出数据变化</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token comment">//父组件</span>
<span class="token operator">&lt;</span>hy<span class="token operator">-</span>form v<span class="token operator">-</span>bind<span class="token operator">=</span><span class="token string">&quot;searchFormConfig&quot;</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;formData&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

   
   
<span class="token comment">//子组件</span>
<span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">modelValue</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Object<span class="token punctuation">,</span>
      <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token punctuation">}</span>


 <span class="token literal-property property">emits</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'update:modelValue'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> <span class="token punctuation">{</span> emit <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token comment">//在组件中定义一个ref</span>
      <span class="token operator">...</span>props<span class="token punctuation">.</span>modelValue
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">watch</span><span class="token punctuation">(</span><span class="token comment">//监听变量变化并传出去</span>
      formData<span class="token punctuation">,</span>
      <span class="token punctuation">(</span><span class="token parameter">newValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">789</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'update:modelValue'</span><span class="token punctuation">,</span> newValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      formData
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/Pz-blog/assets/js/app.763ae9aa.js" defer></script><script src="/Pz-blog/assets/js/2.43fbf41c.js" defer></script><script src="/Pz-blog/assets/js/3.17fa64b6.js" defer></script>
  </body>
</html>
