<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Pz&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/Pz-blog/images/head_photo.jpg">
    <meta name="description" content="Pz&#39;s blog">
    
    <link rel="preload" href="/Pz-blog/assets/css/0.styles.11cf02d2.css" as="style"><link rel="preload" href="/Pz-blog/assets/js/app.ec0f7ae1.js" as="script"><link rel="preload" href="/Pz-blog/assets/js/2.89967461.js" as="script"><link rel="preload" href="/Pz-blog/assets/js/12.309f4d91.js" as="script"><link rel="prefetch" href="/Pz-blog/assets/js/10.fddd3069.js"><link rel="prefetch" href="/Pz-blog/assets/js/11.dfd91946.js"><link rel="prefetch" href="/Pz-blog/assets/js/13.3f0464ce.js"><link rel="prefetch" href="/Pz-blog/assets/js/14.7ec621fc.js"><link rel="prefetch" href="/Pz-blog/assets/js/15.b3263f7b.js"><link rel="prefetch" href="/Pz-blog/assets/js/16.1b04f14d.js"><link rel="prefetch" href="/Pz-blog/assets/js/17.c5a67124.js"><link rel="prefetch" href="/Pz-blog/assets/js/18.c0ee21b9.js"><link rel="prefetch" href="/Pz-blog/assets/js/19.7adf441a.js"><link rel="prefetch" href="/Pz-blog/assets/js/20.4a55f091.js"><link rel="prefetch" href="/Pz-blog/assets/js/21.e9c5d30a.js"><link rel="prefetch" href="/Pz-blog/assets/js/22.d9849dee.js"><link rel="prefetch" href="/Pz-blog/assets/js/3.b8195a3c.js"><link rel="prefetch" href="/Pz-blog/assets/js/4.58f8b001.js"><link rel="prefetch" href="/Pz-blog/assets/js/5.6b3ce222.js"><link rel="prefetch" href="/Pz-blog/assets/js/6.9c34d160.js"><link rel="prefetch" href="/Pz-blog/assets/js/7.bbf8d0d6.js"><link rel="prefetch" href="/Pz-blog/assets/js/8.bf0c91fc.js"><link rel="prefetch" href="/Pz-blog/assets/js/9.81b3c6fc.js">
    <link rel="stylesheet" href="/Pz-blog/assets/css/0.styles.11cf02d2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Pz-blog/" class="home-link router-link-active"><!----> <span class="site-name">Pz's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          布局
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Pz-blog/notebook/布局/flex布局.html" class="nav-link">
  flex布局
</a></li><li class="dropdown-subitem"><a href="/Pz-blog/notebook/布局/Grid布局.html" class="nav-link">
  Grid布局
</a></li></ul></li><li class="dropdown-item"><h4>
          javaScript
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Pz-blog/notebook/js/数组操作.html" class="nav-link">
  数组操作
</a></li><li class="dropdown-subitem"><a href="/Pz-blog/notebook/js/js笔记.html" class="nav-link">
  js常用
</a></li><li class="dropdown-subitem"><a href="/Pz-blog/notebook/js/js进阶/JS进阶.html" class="nav-link">
  js进阶
</a></li></ul></li><li class="dropdown-item"><h4>
          构建工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Pz-blog/notebook/构建/webpack.html" class="nav-link">
  webpack
</a></li></ul></li><li class="dropdown-item"><h4>
          数据请求
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Pz-blog/notebook/数据请求/axios.html" class="nav-link">
  axios
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端框架" class="dropdown-title"><span class="title">前端框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端框架" class="mobile-dropdown-title"><span class="title">前端框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Vue2
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Pz-blog/notebook/前端框架/Vue2/Vue属性.html" class="nav-link">
  Vue属性
</a></li><li class="dropdown-subitem"><a href="/Pz-blog/notebook/前端框架/Vue2/Vue指令.html" class="nav-link">
  Vue指令
</a></li><li class="dropdown-subitem"><a href="/Pz-blog/notebook/前端框架/Vue2/Vue组件化.html" class="nav-link">
  Vue指令
</a></li><li class="dropdown-subitem"><a href="/Pz-blog/notebook/前端框架/Vue2/Vue-router.html" class="nav-link">
  VueRouter
</a></li></ul></li><li class="dropdown-item"><h4>
          Vue3
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Pz-blog/notebook/前端框架/Vue3/Vue3.html" class="nav-link">
  Vue3基本使用
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="探索原理" class="dropdown-title"><span class="title">探索原理</span> <span class="arrow down"></span></button> <button type="button" aria-label="探索原理" class="mobile-dropdown-title"><span class="title">探索原理</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Pz-blog/notebook/learnPrinciple/探索原理.html" class="nav-link">
  javaScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="代码管理" class="dropdown-title"><span class="title">代码管理</span> <span class="arrow down"></span></button> <button type="button" aria-label="代码管理" class="mobile-dropdown-title"><span class="title">代码管理</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Pz-blog/notebook/git/Git.html" class="nav-link">
  git
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/liupziio/Pz-blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  My Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          布局
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Pz-blog/notebook/布局/flex布局.html" class="nav-link">
  flex布局
</a></li><li class="dropdown-subitem"><a href="/Pz-blog/notebook/布局/Grid布局.html" class="nav-link">
  Grid布局
</a></li></ul></li><li class="dropdown-item"><h4>
          javaScript
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Pz-blog/notebook/js/数组操作.html" class="nav-link">
  数组操作
</a></li><li class="dropdown-subitem"><a href="/Pz-blog/notebook/js/js笔记.html" class="nav-link">
  js常用
</a></li><li class="dropdown-subitem"><a href="/Pz-blog/notebook/js/js进阶/JS进阶.html" class="nav-link">
  js进阶
</a></li></ul></li><li class="dropdown-item"><h4>
          构建工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Pz-blog/notebook/构建/webpack.html" class="nav-link">
  webpack
</a></li></ul></li><li class="dropdown-item"><h4>
          数据请求
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Pz-blog/notebook/数据请求/axios.html" class="nav-link">
  axios
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端框架" class="dropdown-title"><span class="title">前端框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端框架" class="mobile-dropdown-title"><span class="title">前端框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Vue2
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Pz-blog/notebook/前端框架/Vue2/Vue属性.html" class="nav-link">
  Vue属性
</a></li><li class="dropdown-subitem"><a href="/Pz-blog/notebook/前端框架/Vue2/Vue指令.html" class="nav-link">
  Vue指令
</a></li><li class="dropdown-subitem"><a href="/Pz-blog/notebook/前端框架/Vue2/Vue组件化.html" class="nav-link">
  Vue指令
</a></li><li class="dropdown-subitem"><a href="/Pz-blog/notebook/前端框架/Vue2/Vue-router.html" class="nav-link">
  VueRouter
</a></li></ul></li><li class="dropdown-item"><h4>
          Vue3
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Pz-blog/notebook/前端框架/Vue3/Vue3.html" class="nav-link">
  Vue3基本使用
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="探索原理" class="dropdown-title"><span class="title">探索原理</span> <span class="arrow down"></span></button> <button type="button" aria-label="探索原理" class="mobile-dropdown-title"><span class="title">探索原理</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Pz-blog/notebook/learnPrinciple/探索原理.html" class="nav-link">
  javaScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="代码管理" class="dropdown-title"><span class="title">代码管理</span> <span class="arrow down"></span></button> <button type="button" aria-label="代码管理" class="mobile-dropdown-title"><span class="title">代码管理</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Pz-blog/notebook/git/Git.html" class="nav-link">
  git
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/liupziio/Pz-blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  My Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span></span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Pz-blog/notebook/js/js%E7%AC%94%E8%AE%B0.html#for-初始化-条件-自增-语句" class="sidebar-link">for(初始化;条件;自增){
语句</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Pz-blog/notebook/js/js%E7%AC%94%E8%AE%B0.html#当页面滚动时候发生" class="sidebar-link">当页面滚动时候发生</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Pz-blog/notebook/js/js%E7%AC%94%E8%AE%B0.html#加载完整个页面之后完成执行代码" class="sidebar-link">加载完整个页面之后完成执行代码</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Pz-blog/notebook/js/js%E7%AC%94%E8%AE%B0.html#_1、cookie" class="sidebar-link">1、cookie</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Pz-blog/notebook/js/js%E7%AC%94%E8%AE%B0.html#参数说明" class="sidebar-link">参数说明</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/js/js%E7%AC%94%E8%AE%B0.html#raw" class="sidebar-link">raw</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/js/js%E7%AC%94%E8%AE%B0.html#json" class="sidebar-link">json</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/js/js%E7%AC%94%E8%AE%B0.html#expires" class="sidebar-link">expires</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/js/js%E7%AC%94%E8%AE%B0.html#path" class="sidebar-link">path</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/js/js%E7%AC%94%E8%AE%B0.html#domain" class="sidebar-link">domain</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/js/js%E7%AC%94%E8%AE%B0.html#secure" class="sidebar-link">secure</a></li></ul></li><li><a href="/Pz-blog/notebook/js/js%E7%AC%94%E8%AE%B0.html#_1、rem适配" class="sidebar-link">1、rem适配</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Pz-blog/notebook/js/js%E7%AC%94%E8%AE%B0.html#_2、media适配" class="sidebar-link">2、media适配</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Pz-blog/notebook/js/js%E7%AC%94%E8%AE%B0.html#_1、打断点" class="sidebar-link">1、打断点</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Pz-blog/notebook/js/js%E7%AC%94%E8%AE%B0.html#_2、获取节点" class="sidebar-link">2、获取节点</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Pz-blog/notebook/js/js%E7%AC%94%E8%AE%B0.html#_3、原生js事件委托" class="sidebar-link">3、原生js事件委托</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Pz-blog/notebook/js/js%E7%AC%94%E8%AE%B0.html#_1-加减乘除小数点处理" class="sidebar-link">1.加减乘除小数点处理</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Pz-blog/notebook/js/js%E7%AC%94%E8%AE%B0.html#_1-try-catch-finally-语句" class="sidebar-link">1. try/catch/finally 语句</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Pz-blog/notebook/js/js%E7%AC%94%E8%AE%B0.html#_1、promise" class="sidebar-link">1、Promise</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/js/js%E7%AC%94%E8%AE%B0.html#_1-promise-基本" class="sidebar-link">1. Promise  基本</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/js/js%E7%AC%94%E8%AE%B0.html#_2-promise-链式编程" class="sidebar-link">2. Promise 链式编程</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/js/js%E7%AC%94%E8%AE%B0.html#_3-处理错误" class="sidebar-link">3. 处理错误</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/js/js%E7%AC%94%E8%AE%B0.html#_4-promise-all" class="sidebar-link">4. Promise.all ( [ ] )</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/js/js%E7%AC%94%E8%AE%B0.html#_5-promise-race" class="sidebar-link">5. Promise.race ( [ ] )</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/js/js%E7%AC%94%E8%AE%B0.html#_6-finally-无脑执行" class="sidebar-link">6.  .finally() 无脑执行</a></li></ul></li><li><a href="/Pz-blog/notebook/js/js%E7%AC%94%E8%AE%B0.html#_2、async-await" class="sidebar-link">2、async/await</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/js/js%E7%AC%94%E8%AE%B0.html#_1-基本使用" class="sidebar-link">1. 基本使用</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/js/js%E7%AC%94%E8%AE%B0.html#_2-处理错误" class="sidebar-link">2.处理错误</a></li></ul></li><li><a href="/Pz-blog/notebook/js/js%E7%AC%94%E8%AE%B0.html#_1、获取当前时间" class="sidebar-link">1、获取当前时间</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Pz-blog/notebook/js/js%E7%AC%94%E8%AE%B0.html#_2、时间转换" class="sidebar-link">2、时间转换</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Pz-blog/notebook/js/js%E7%AC%94%E8%AE%B0.html#_1、父页面监听iframe子页面消息" class="sidebar-link">1、父页面监听iframe子页面消息</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/js/js%E7%AC%94%E8%AE%B0.html#碰到的问题" class="sidebar-link">碰到的问题</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>z-index		//设置层级，盖的比被盖的数大 z-index: 1;
Math.ceil()	 //向上取整
Math.floor() 	//向下取整
setAttribute	//设置(名称,值)
getAttribute	//获取(名称)
removeAttribute	//删除(名称)
document.createElement 	//添加标签
父级.appendChild(子节点) 	添加子节点//添加到末尾
父级.insertBefore	//(子节点,在谁之前插);
tBodies	//获取表格
rows	//获取行
cells	//获取行的单元格
tHead	//获取表头
tFoot	//获取表尾
toLowerCase()	//转为小写英文
search()		//找到并且返回字符串出现的位置,如果没找到输出来-1
split() 		//把字符串切开()里边放什么根据什么切
offsetLeft 	//获取当前位置
setInterval(  ,时间) 	//开启定时器
clearInterval()	//关闭定时器
true/false 	//真/假 布尔值
Math.abs() 	//绝对值
document.documentElement.clientWidth 	//可视区宽</p> <p>document.documentElement.clientHeight  	// 可视区高</p> <p>scrollTop 					//可视区距离顶部的滚动距离
alert(window.navigator.userAgent);	//查看当前浏览器版本</p> <p>open 				//打开窗口
close	 			//关闭窗口
about:blank			// 一个空白页面
document.write() 			//打开之前清空之前页面
alert() 				//警告框
confirm(&quot;提问的内容&quot;&quot;) 		//提问框 有返回值
prompt(&quot;请输入,'框内默认文字'&quot;) 	//输入框 有返回值</p> <p>​</p> <h2 id="for-初始化-条件-自增-语句"><a href="#for-初始化-条件-自增-语句" class="header-anchor">#</a> for(初始化;条件;自增){
语句</h2> <p>var i=0;  	//1.初始化</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">while</span><span class="token punctuation">(</span>i<span class="token operator">&lt;</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 	<span class="token comment">//2.条件</span>

	<span class="token function">alert</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//3.语句</span>

	i<span class="token operator">=</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//i++;   //4.自增</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="当页面滚动时候发生"><a href="#当页面滚动时候发生" class="header-anchor">#</a> 当页面滚动时候发生</h2> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function-variable function">onscroll</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
</code></pre></div><h2 id="加载完整个页面之后完成执行代码"><a href="#加载完整个页面之后完成执行代码" class="header-anchor">#</a> 加载完整个页面之后完成执行代码</h2> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function-variable function">onload</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
</code></pre></div><p>arr.sort(function(n1,n2)	//sort需要两个比较参数
{
return n1-n2;	//小到大,n2,n1调换大到小
});			//sort字母排序</p> <p>function getStyle(){
}	//获取不在行间的样式</p> <p>​</p> <h1 id="js鼠标移入移出的区别"><a href="#js鼠标移入移出的区别" class="header-anchor">#</a> js鼠标移入移出的区别</h1> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">1</span><span class="token punctuation">.</span>onmouseenter和onmouseleave
鼠标经过自身时触发事件，经过它的子元素时不会触发该事件，不支持事件冒泡。

<span class="token number">2</span><span class="token punctuation">.</span>onmouseover和onmouseout
鼠标经过自身时触发事件，经过它的子元素时也会触发该事件，并支持事件冒泡。

<span class="token number">3</span><span class="token punctuation">.</span>onmousemove
鼠标移动到自身时鼠标指针在指定区域移动时触发，并支持事件冒泡。

</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>mouseover和mouseenter的异同体现在两个方面：
<span class="token comment">//1.是否支持冒泡</span>
<span class="token comment">//2.事件的触发时机</span>

<span class="token number">1.</span><span class="token function">mouseenter</span><span class="token punctuation">(</span>移入<span class="token punctuation">)</span><span class="token function">和mouseleave</span><span class="token punctuation">(</span>移出<span class="token punctuation">)</span>
<span class="token comment">//当鼠标移入元素或其子元素都会触发事件，所以有一个重复触发，冒泡过程。</span>
<span class="token number">2.</span><span class="token function">mouseover</span><span class="token punctuation">(</span>移入<span class="token punctuation">)</span><span class="token function">和mouseout</span><span class="token punctuation">(</span>移出<span class="token punctuation">)</span>
<span class="token comment">//当鼠标移除元素本身（不包含元素的子元素）会触发事件，也就是不会冒泡。</span>
</code></pre></div><h1 id="js定时器"><a href="#js定时器" class="header-anchor">#</a> js定时器</h1> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//let timer = setInterval(method,time)</span>

<span class="token comment">//开启定时器</span>
<span class="token function">setInterval</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span>time<span class="token punctuation">)</span>
<span class="token comment">//关闭定时器</span>
<span class="token function">clearInterval</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span>

<span class="token keyword">var</span> <span class="token function-variable function">al</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">var</span> ni<span class="token operator">=</span><span class="token function">setInterval</span><span class="token punctuation">(</span>al<span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">clearInterval</span><span class="token punctuation">(</span>ni<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//括号中必须添加定时器的名称</span>
</code></pre></div><h1 id="一、浏览器"><a href="#一、浏览器" class="header-anchor">#</a> 一、浏览器</h1> <h2 id="_1、cookie"><a href="#_1、cookie" class="header-anchor">#</a> 1、cookie</h2> <ul><li>创建cookie</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//会话cookie</span>
<span class="token comment">//退出浏览器即删除</span>
$<span class="token punctuation">.</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'value'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//保存时间</span>
<span class="token comment">//expires 保存时间(天)</span>
$<span class="token punctuation">.</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'value'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">expires</span><span class="token operator">:</span> <span class="token number">7</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//创建 cookie，并设置 cookie 的有效路径，路径为网站的根目录：</span>
$<span class="token punctuation">.</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'value'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">expires</span><span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>读取cookie</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//读取单个</span>
$<span class="token punctuation">.</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//读取所有</span>
$<span class="token punctuation">.</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>删除cookie</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// cookie 删除成功返回 true，否则返回 false</span>
$<span class="token punctuation">.</span><span class="token function">removeCookie</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; true</span>

<span class="token comment">// 写入使用了 path时，读取也需要使用相同的属性 (path, domain) </span>
$<span class="token punctuation">.</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'value'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="参数说明"><a href="#参数说明" class="header-anchor">#</a> 参数说明</h2> <h3 id="raw"><a href="#raw" class="header-anchor">#</a> raw</h3> <p>默认值：false。</p> <p>默认情况下，读取和写入 cookie 的时候自动进行编码和解码（使用 encodeURIComponent 编码，decodeURIComponent 解码）。要关闭这个功能设置 raw:true 即可：</p> <div class="language- extra-class"><pre class="language-text"><code>$.cookie.raw = true;
</code></pre></div><h3 id="json"><a href="#json" class="header-anchor">#</a> json</h3> <p>设置 cookie 的数据使用 json 存储与读取，这时就不需要使用 JSON.stringify 和 JSON.parse 了。</p> <div class="language- extra-class"><pre class="language-text"><code>$.cookie.json = true;
</code></pre></div><h3 id="expires"><a href="#expires" class="header-anchor">#</a> expires</h3> <div class="language- extra-class"><pre class="language-text"><code>expires: 365
</code></pre></div><p>定义 cookie 的有效时间，值可以是一个数字（从创建 cookie 时算起，以天为单位）或一个 Date 对象。如果省略，那么创建的 cookie 是会话 cookie，将在用户退出浏览器时被删除。</p> <h3 id="path"><a href="#path" class="header-anchor">#</a> path</h3> <div class="language- extra-class"><pre class="language-text"><code>path: '/'
</code></pre></div><p>默认情况：只有设置 cookie 的网页才能读取该 cookie。</p> <p>定义 cookie 的有效路径。默认情况下， 该参数的值为创建 cookie 的网页所在路径（标准浏览器的行为）。</p> <p>如果你想在整个网站中访问这个 cookie 需要这样设置有效路径：path: '/'。如果你想删除一个定义了有效路径的 cookie，你需要在调用函数时包含这个路径:</p> <div class="language- extra-class"><pre class="language-text"><code>$.cookie('the_cookie', null,{ path: '/' });
</code></pre></div><h3 id="domain"><a href="#domain" class="header-anchor">#</a> domain</h3> <div class="language- extra-class"><pre class="language-text"><code>domain: 'example.com'
</code></pre></div><p>默认值：创建 cookie 的网页所拥有的域名。</p> <h3 id="secure"><a href="#secure" class="header-anchor">#</a> secure</h3> <div class="language- extra-class"><pre class="language-text"><code>secure: true
</code></pre></div><p>默认值：false。如果为 true，cookie 的传输需要使用安全协议（HTTPS）。</p> <h1 id="二、html"><a href="#二、html" class="header-anchor">#</a> 二、Html</h1> <h2 id="_1、rem适配"><a href="#_1、rem适配" class="header-anchor">#</a> 1、rem适配</h2> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// window改变大小时 = 调用setRemFont</span>
    window<span class="token punctuation">.</span>onresize <span class="token operator">=</span> setRemFont
    <span class="token keyword">function</span> <span class="token function">setRemFont</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 获取html</span>
        <span class="token keyword">var</span> domIe <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement
        <span class="token comment">// 获取设备宽度</span>
        <span class="token keyword">var</span> width <span class="token operator">=</span> domIe<span class="token punctuation">.</span>clientWidth
        <span class="token comment">// 1980是页面标准 16是1rem等于多少px</span>
        domIe<span class="token punctuation">.</span>style<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> width <span class="token operator">/</span> <span class="token number">1980</span> <span class="token operator">*</span> <span class="token number">16</span> <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
    <span class="token function">setRemFont</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="_2、media适配"><a href="#_2、media适配" class="header-anchor">#</a> 2、media适配</h2> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* 根据需求来更改 */</span>

<span class="token atrule"><span class="token rule">@media</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 1680px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
    <span class="token selector">html, body</span> <span class="token punctuation">{</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token atrule"><span class="token rule">@media</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 1600px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
    <span class="token selector">html, body</span> <span class="token punctuation">{</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token atrule"><span class="token rule">@media</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 1500px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
    <span class="token selector">html, body</span> <span class="token punctuation">{</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 13px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token atrule"><span class="token rule">@media</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 1440px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
    <span class="token selector">html, body</span> <span class="token punctuation">{</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 13px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token atrule"><span class="token rule">@media</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 1366px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
    <span class="token selector">html, body</span> <span class="token punctuation">{</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 11px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h1 id="三、js基本操作"><a href="#三、js基本操作" class="header-anchor">#</a> 三、js基本操作</h1> <h2 id="_1、打断点"><a href="#_1、打断点" class="header-anchor">#</a> 1、打断点</h2> <ul><li>使用语句并且打开调试工具 <strong>F12</strong> 执行到这个语句时就会停止暂停后边的执行 (点击继续即可向下执行)</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">debugger</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_2、获取节点"><a href="#_2、获取节点" class="header-anchor">#</a> 2、获取节点</h2> <div class="language-js extra-class"><pre class="language-js"><code>　<span class="token keyword">var</span> test <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
　　<span class="token keyword">var</span> parent <span class="token operator">=</span> test<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span> <span class="token comment">// 父节点</span>
　　<span class="token keyword">var</span> chils <span class="token operator">=</span> test<span class="token punctuation">.</span>childNodes<span class="token punctuation">;</span> <span class="token comment">// 全部子节点</span>
　　<span class="token keyword">var</span> first <span class="token operator">=</span> test<span class="token punctuation">.</span>firstChild<span class="token punctuation">;</span> <span class="token comment">// 第一个子节点</span>
　　<span class="token keyword">var</span> last <span class="token operator">=</span> test<span class="token punctuation">.</span>lastChile<span class="token punctuation">;</span> <span class="token comment">// 最后一个子节点　</span>
　　<span class="token keyword">var</span> previous <span class="token operator">=</span> test<span class="token punctuation">.</span>previousSibling<span class="token punctuation">;</span> <span class="token comment">// 上一个兄弟节点</span>
　　<span class="token keyword">var</span> next <span class="token operator">=</span> test<span class="token punctuation">.</span>nextSibling<span class="token punctuation">;</span> <span class="token comment">// 下一个兄弟节点</span>

next<span class="token punctuation">.</span>style<span class="token punctuation">.</span>diplay <span class="token operator">=</span> <span class="token string">&quot;none&quot;</span>
#报错
# Cannot <span class="token keyword">set</span> property <span class="token string">'display'</span> <span class="token keyword">of</span> <span class="token keyword">undefined</span>
<span class="token comment">//不能将属性“display”设置为undefined</span>


</code></pre></div><ul><li><strong>以上获取节点可能设置不了style</strong> <ul><li>不知道为什么吧，那就来看看下边的这个方式吧</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> previous <span class="token operator">=</span> test<span class="token punctuation">.</span>previousElementSibling<span class="token punctuation">;</span> <span class="token comment">// 上一个兄弟节点　</span>
<span class="token keyword">var</span> next <span class="token operator">=</span> test<span class="token punctuation">.</span>nextElementSibling<span class="token punctuation">;</span> <span class="token comment">// 下一个兄弟节点</span>

next<span class="token punctuation">.</span>style<span class="token punctuation">.</span>diplay <span class="token operator">=</span> <span class="token string">&quot;none&quot;</span>
#这样就可以，牛p不
</code></pre></div><ul><li>设置不了是因为设置的是节点，节点有很多个，可能你的下一个节点就是一个 <strong>空格</strong>而已，所以获取下一个 <strong>element</strong> 节点，那就可以 <strong>为所欲为了</strong></li></ul> <h2 id="_3、原生js事件委托"><a href="#_3、原生js事件委托" class="header-anchor">#</a> 3、原生js事件委托</h2> <ul><li>这里可以处理渲染出来的数据
<ul><li>通过 <strong>e</strong> 来查找</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code> parentul<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> lis <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>children
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h1 id="四、数字的处理"><a href="#四、数字的处理" class="header-anchor">#</a> 四、数字的处理</h1> <h2 id="_1-加减乘除小数点处理"><a href="#_1-加减乘除小数点处理" class="header-anchor">#</a> 1.加减乘除小数点处理</h2> <ol><li>只保留整数</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token number">5.12345</span><span class="token punctuation">)</span><span class="token comment">//5</span>
</code></pre></div><ol start="2"><li>向下取整</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token number">5.12345</span><span class="token punctuation">)</span><span class="token comment">//5</span>
</code></pre></div><ol start="3"><li>向上取整</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token number">5.123456</span><span class="token punctuation">)</span><span class="token comment">//6</span>
</code></pre></div><ol start="4"><li>四舍五入</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token number">5.12345</span><span class="token punctuation">)</span><span class="token comment">//5</span>
Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token number">5.6231</span><span class="token punctuation">)</span><span class="token comment">//6</span>
</code></pre></div><ol start="5"><li>获取绝对值</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token comment">//1</span>
</code></pre></div><ol start="6"><li>返回最大值和最小值</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token comment">//2</span>
Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token comment">//1</span>
</code></pre></div><ol start="7"><li>随机数字</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//向上取整获取随机数</span>
Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//生成1-10的随机数</span>
</code></pre></div><h1 id="五、处理异常"><a href="#五、处理异常" class="header-anchor">#</a> 五、处理异常</h1> <h2 id="_1-try-catch-finally-语句"><a href="#_1-try-catch-finally-语句" class="header-anchor">#</a> 1. try/catch/finally 语句</h2> <ul><li><strong>try</strong> 发现异常并且 <strong>throw</strong> 抛出；</li> <li><strong>catch</strong> 通过 <strong>err</strong> 捕获异常并且处理；</li> <li><strong>finally</strong> 语句无论 <strong>try</strong> 和 <strong>catch</strong> 执行结果如何都会执行；</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>

<span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>请输入 <span class="token number">5</span> 到 <span class="token number">10</span> <span class="token literal-property property">之间的数</span><span class="token operator">:</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>input id<span class="token operator">=</span><span class="token string">&quot;demo&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span> onclick<span class="token operator">=</span><span class="token string">&quot;myFunction()&quot;</span><span class="token operator">&gt;</span>检测输入<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>p id<span class="token operator">=</span><span class="token string">&quot;message&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>

<span class="token keyword">function</span> <span class="token function">myFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> message<span class="token punctuation">,</span> x<span class="token punctuation">;</span>
    message <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    message<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    x <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;demo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span> 
        <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">==</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>  <span class="token keyword">throw</span> <span class="token string">&quot;为空&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isNaN</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token string">&quot;不是一个数字&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">)</span>   <span class="token keyword">throw</span> <span class="token string">&quot;太大&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">)</span>    <span class="token keyword">throw</span> <span class="token string">&quot;太小&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">catch</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        message<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&quot;输入的值 &quot;</span> <span class="token operator">+</span> err<span class="token punctuation">;</span><span class="token comment">//这里的err就是try的throw抛出来的</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;demo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h1 id="六、异步处理"><a href="#六、异步处理" class="header-anchor">#</a> 六、异步处理</h1> <h2 id="_1、promise"><a href="#_1、promise" class="header-anchor">#</a> 1、Promise</h2> <ul><li><strong>Promise</strong> 严格遵守 <strong>resolve</strong> 返回结果 <strong>reject</strong> 抛出错误</li></ul> <h3 id="_1-promise-基本"><a href="#_1-promise-基本" class="header-anchor">#</a> 1. <strong>Promise</strong>  基本</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">runAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//做一些异步操作</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'执行完成'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'随便什么数据'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> p<span class="token punctuation">;</span>            
<span class="token punctuation">}</span>
<span class="token function">runAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//随便什么数据//这里拿到的是resolve返回出来的数据</span>
    <span class="token comment">//后面可以用传过来的数据做些其他操作</span>
    <span class="token comment">//......</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_2-promise-链式编程"><a href="#_2-promise-链式编程" class="header-anchor">#</a> 2. <strong>Promise</strong> 链式编程</h3> <div class="language-js extra-class"><pre class="language-js"><code>   <span class="token keyword">function</span> <span class="token function">runAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//做一些异步操作</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;0数据&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> p<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">runAsync1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//做一些异步操作</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;1数据&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> p<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">runAsync2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//做一些异步操作</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;2数据&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> p<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


<span class="token function">runAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">#这里的数据是runAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span>的数据<span class="token comment">//0数据</span>
      <span class="token keyword">return</span> <span class="token function">runAsync1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">#这里的数据是runAsync1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>的数据<span class="token comment">//1数据</span>
      <span class="token keyword">return</span> <span class="token function">runAsync2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">#这里的数据是runAsync2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>的数据<span class="token comment">//2数据</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_3-处理错误"><a href="#_3-处理错误" class="header-anchor">#</a> 3. 处理错误</h3> <ol><li>使用 .<strong>then</strong> 第二个回调函数来接收错误</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//做一些异步操作</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">var</span> num <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//生成1-10的随机数</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>num<span class="token operator">&lt;=</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token function">resolve</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">else</span><span class="token punctuation">{</span>
                <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'数字太大了'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> p<span class="token punctuation">;</span>            
<span class="token punctuation">}</span>

<span class="token function">getNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">reason</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
    <span class="token comment">// function(data){//正确回调</span>
    <span class="token comment">//     console.log('resolved');</span>
    <span class="token comment">//     console.log(data);</span>
    <span class="token comment">// }, </span>
    <span class="token comment">// function(reason){//错误回调</span>
    <span class="token comment">//     console.log('rejected');</span>
    <span class="token comment">//     console.log(reason);//这里打印原因</span>
    <span class="token comment">// }</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>使用 <strong>.catch</strong> 来接收错误回调</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">getNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//正确去执行</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'resolved'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//&lt;=5的随机数</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">reject</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//这里接受reject抛出的错误</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'rejected'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reject<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//这里打印原因//数字太大</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_4-promise-all"><a href="#_4-promise-all" class="header-anchor">#</a> 4. **Promise.all ( [ ] ) **</h3> <ul><li><strong>会等待</strong> 最慢的 那个结束 一起执行 回调函数 并且返回来 一个数组</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">runAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">runAsync1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">runAsync2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//[&quot;0的数据&quot;, &quot;1的数据&quot;, &quot;2的数据&quot;]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_5-promise-race"><a href="#_5-promise-race" class="header-anchor">#</a> 5. Promise.race ( [ ] )</h3> <ul><li>根据 <strong>最快的</strong> 来执行 回调</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//假如runAsunc()1秒执行完毕其他都是2秒</span>
Promise<span class="token punctuation">.</span><span class="token function">race</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">runAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">runAsync1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">runAsync2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">results</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token comment">//0执行完成 //0的数据//1执行完成//2行完成</span>
   <span class="token comment">//这里显示只有0有数据，因为runAsync() 一秒执行完毕直接就调用了函数</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><strong>Promise.race( [ ] )</strong> 请求图片超时案例</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//请求某个图片资源</span>
<span class="token keyword">function</span> <span class="token function">requestImg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//new一个新的img标签</span>
        img<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        img<span class="token punctuation">.</span>src <span class="token operator">=</span><span class="token string">'xxx'</span>
        <span class="token comment">// img.src = 'https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=205652071,1642882044&amp;fm=26&amp;gp=0.jpg';</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> p<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//延时函数，用于给请求计时</span>
<span class="token keyword">function</span> <span class="token function">timeout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'图片请求超时'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> p<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

Promise
<span class="token comment">//这里回去调用 requestImg() 如果有错那就不会调用 .then 直接调用 .catch 调用第二个回调函数</span>
<span class="token punctuation">.</span><span class="token function">race</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">requestImg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">timeout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">results</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//这里打印成功</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">reason</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//这里打印请求超时</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_6-finally-无脑执行"><a href="#_6-finally-无脑执行" class="header-anchor">#</a> 6.  .finally() 无脑执行</h3> <ul><li><strong>.finally</strong> 不管对错都会去执行</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">getNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//正确去执行</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'resolved'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//&lt;=5的随机数</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">reject</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//这里接受reject抛出的错误</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'rejected'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reject<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//这里打印原因//数字太大</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'无脑执行'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_2、async-await"><a href="#_2、async-await" class="header-anchor">#</a> 2、async/await</h2> <ul><li><p><strong>async</strong> : 异步 <strong>await</strong> ：等待</p></li> <li><p>个人初步理解 <strong>async/await</strong> 算是 <strong>promise</strong> 的语法糖</p></li> <li><p><strong>async/await</strong> 需要搭配使用</p> <ul><li><strong>async</strong> 下边没有 <strong>await</strong> <strong>async</strong> 没有什么作用,只是一个不同函数</li> <li><strong>await</strong> 上边没有了 <strong>async</strong> 会报错、</li></ul></li></ul> <h3 id="_1-基本使用"><a href="#_1-基本使用" class="header-anchor">#</a> 1. 基本使用</h3> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">function</span> <span class="token function">aa</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// console.log('aalog');</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;aa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">bb</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// console.log('bblog');</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;bb&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">asy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//这里会有序的向下走,之后 aa() 执行完 aa_ 接受到 才会向下执行</span>
      <span class="token keyword">let</span> aa_ <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">aa</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>aa_<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> bb_ <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">bb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bb_<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">asy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_2-处理错误"><a href="#_2-处理错误" class="header-anchor">#</a> 2.处理错误</h3> <ul><li>成功的放在 <strong>async</strong> 的 <strong>try</strong> 中 错误的放在 <strong>catch</strong> 中</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">摇色子</span><span class="token punctuation">(</span><span class="token parameter">猜测</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> sino <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">6</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//随机数1-6</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>sino <span class="token operator">&gt;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">//数大于3时</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>猜测 <span class="token operator">===</span> <span class="token string">&quot;大&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span>sino<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">//猜测不是大</span>
            <span class="token function">reject</span><span class="token punctuation">(</span>sino<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token comment">//数!大于3时</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>猜测 <span class="token operator">===</span> <span class="token string">&quot;大&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">reject</span><span class="token punctuation">(</span>sino<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">//猜测不是大</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span>sino<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// setTimeout(() =&gt; {</span>
        <span class="token comment">//   resolve(sino);</span>
        <span class="token comment">// }, 300);</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token comment">//把await及获取它的值的操作放在try里</span>
        <span class="token keyword">let</span> n <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">摇色子</span><span class="token punctuation">(</span><span class="token string">&quot;大&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;赢了&quot;</span> <span class="token operator">+</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//失败的操作放在catch里</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;输了&quot;</span> <span class="token operator">+</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h1 id="七、时间"><a href="#七、时间" class="header-anchor">#</a> 七、时间</h1> <h2 id="_1、获取当前时间"><a href="#_1、获取当前时间" class="header-anchor">#</a> 1、获取当前时间</h2> <ul><li>格式
<ul><li>2021-01-12T17:09:36</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token keyword">var</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> vYear <span class="token operator">=</span> d<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> vMon <span class="token operator">=</span> d<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> vDay <span class="token operator">=</span> d<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> h <span class="token operator">=</span> d<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> m <span class="token operator">=</span> d<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> se <span class="token operator">=</span> d<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> s 
        s <span class="token operator">=</span>
          vYear <span class="token operator">+</span>
          <span class="token string">&quot;-&quot;</span> <span class="token operator">+</span>
          <span class="token punctuation">(</span>vMon <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token string">&quot;0&quot;</span> <span class="token operator">+</span> vMon <span class="token operator">:</span> vMon<span class="token punctuation">)</span> <span class="token operator">+</span>
          <span class="token string">&quot;-&quot;</span> <span class="token operator">+</span>
          <span class="token punctuation">(</span>vDay <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token string">&quot;0&quot;</span> <span class="token operator">+</span> vDay <span class="token operator">:</span> vDay<span class="token punctuation">)</span> <span class="token operator">+</span>
          <span class="token string">&quot;T&quot;</span> <span class="token operator">+</span>
          <span class="token punctuation">(</span>h <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token string">&quot;0&quot;</span> <span class="token operator">+</span> h <span class="token operator">:</span> h<span class="token punctuation">)</span> <span class="token operator">+</span>
          <span class="token string">&quot;:&quot;</span> <span class="token operator">+</span>
          <span class="token punctuation">(</span>m <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token string">&quot;0&quot;</span> <span class="token operator">+</span> m <span class="token operator">:</span> m<span class="token punctuation">)</span> <span class="token operator">+</span>
          <span class="token string">&quot;:&quot;</span> <span class="token operator">+</span>
          <span class="token punctuation">(</span>se <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token string">&quot;0&quot;</span> <span class="token operator">+</span> se <span class="token operator">:</span> se<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> s<span class="token punctuation">;</span>
</code></pre></div><h2 id="_2、时间转换"><a href="#_2、时间转换" class="header-anchor">#</a> 2、时间转换</h2> <div class="language-js extra-class"><pre class="language-js"><code>#方法
<span class="token keyword">function</span> <span class="token function">dateFormat</span><span class="token punctuation">(</span><span class="token parameter">fmt<span class="token punctuation">,</span> date</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> ret<span class="token punctuation">;</span>
    <span class="token keyword">const</span> opt <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;Y+&quot;</span><span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token comment">// 年</span>
        <span class="token string-property property">&quot;m+&quot;</span><span class="token operator">:</span> <span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>     <span class="token comment">// 月</span>
        <span class="token string-property property">&quot;d+&quot;</span><span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token comment">// 日</span>
        <span class="token string-property property">&quot;H+&quot;</span><span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>           <span class="token comment">// 时</span>
        <span class="token string-property property">&quot;M+&quot;</span><span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>         <span class="token comment">// 分</span>
        <span class="token string-property property">&quot;S+&quot;</span><span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          <span class="token comment">// 秒</span>
        <span class="token comment">// 有其他格式化字符需求可以继续添加，必须转化成字符串</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> k <span class="token keyword">in</span> opt<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ret <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;(&quot;</span> <span class="token operator">+</span> k <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>fmt<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ret<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            fmt <span class="token operator">=</span> fmt<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>ret<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>ret<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">(</span>opt<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>opt<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span>ret<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">,</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> fmt<span class="token punctuation">;</span>
<span class="token punctuation">}</span>	


#调用
<span class="token keyword">let</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">dateFormat</span><span class="token punctuation">(</span><span class="token string">&quot;YYYY-mm-dd HH:MM&quot;</span><span class="token punctuation">,</span> date<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;&gt;</span> <span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">06</span> <span class="token number">19</span><span class="token operator">:</span><span class="token number">45</span>`
</code></pre></div><h1 id="八、简易输入框防抖必修改"><a href="#八、简易输入框防抖必修改" class="header-anchor">#</a> 八、简易输入框防抖必修改</h1> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
          <span class="token comment">// element.input = function () {</span>
          <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 每次进来的时候都将之前的清除掉，如果还没到一秒的时候就将之前的清除掉，这样就不会触发之前setTimeout绑定的事件， 如果超过一秒，之前的事件就会被触发下次进来的时候同样清除之前的timer</span>
          timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 在这里进行我们的操作  这样就不会频繁的进行我们这里面的操作了</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">// };</span>
</code></pre></div><h1 id="九、简易回调函数"><a href="#九、简易回调函数" class="header-anchor">#</a> 九、简易回调函数</h1> <ul><li>获取数组中符合条件的某个对象</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;aaa&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;ccc&quot;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;bbb&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;ddd&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token punctuation">{</span>
                <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;eee&quot;</span><span class="token punctuation">,</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
    text <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">testThis</span><span class="token operator">:</span> <span class="token number">789</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">event</span><span class="token punctuation">(</span><span class="token parameter">arrParams<span class="token punctuation">,</span> callbackObj<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">of</span> arrParams<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// console.log(item);</span>
       
        <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">&quot;eee&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// console.log(this.text.testThis);</span>
          callbackObj<span class="token punctuation">.</span>testThis <span class="token operator">=</span> <span class="token number">666</span><span class="token punctuation">;</span>
          <span class="token comment">// console.log(callbackObj);</span>
          <span class="token comment">// 如果符合条件就callback抛出</span>
          <span class="token function">callback</span><span class="token punctuation">(</span>callbackObj<span class="token punctuation">,</span> arrParams<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token comment">// 否则调用本身</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>children<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">event</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>children<span class="token punctuation">,</span>callbackObj<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">event</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> text<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res1<span class="token punctuation">,</span>res2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res1<span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res2<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>testThis <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h1 id="十、this指向"><a href="#十、this指向" class="header-anchor">#</a> 十、this指向</h1> <ul><li>https://mp.weixin.qq.com/s/hYm0JgBI25grNG_2sCRlTA</li></ul> <h1 id="十一、window操作"><a href="#十一、window操作" class="header-anchor">#</a> 十一、window操作</h1> <h2 id="_1、父页面监听iframe子页面消息"><a href="#_1、父页面监听iframe子页面消息" class="header-anchor">#</a> 1、父页面监听iframe子页面消息</h2> <ul><li>父页面写入</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//监听值</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//监听到回调方法</span>
 <span class="token function">handleMessage</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>flag <span class="token operator">===</span> <span class="token string">&quot;microApp&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>data <span class="token operator">===</span> <span class="token string">&quot;wyy&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          wx<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;../index/index&quot;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>flag <span class="token operator">===</span> <span class="token string">&quot;microServe&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>data <span class="token operator">===</span> <span class="token string">&quot;456&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          wx<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;../index/index&quot;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
 #别忘记移除事件
 window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>子页面写入</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//发给父页面 一个值,第二个参数为发给谁  </span>
<span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">&quot;发送的消息&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;发给谁(http://www.baidu.com)&quot;</span><span class="token punctuation">)</span>
window<span class="token punctuation">.</span>parent<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">'wyy'</span><span class="token punctuation">,</span> <span class="token string">'*'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//页面关闭时执行</span>
window<span class="token punctuation">.</span><span class="token function-variable function">onbeforeunload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;微应用返回&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      window<span class="token punctuation">.</span>parent<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">'wyy'</span><span class="token punctuation">,</span> <span class="token string">'*'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="碰到的问题"><a href="#碰到的问题" class="header-anchor">#</a> 碰到的问题</h3> <ul><li>在<strong>ios</strong>中<strong>onbeforeunload</strong>失效，发送不出来事件
<ul><li>原因是ios中淘汰了<strong>onbeforeunload</strong>事件
<ul><li>可以使用pagehide</li></ul></li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>   window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'pagehide'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  
   <span class="token punctuation">}</span><span class="token punctuation">)</span>
   window<span class="token punctuation">.</span><span class="token function-variable function">onpagehide</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      
   <span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/Pz-blog/assets/js/app.ec0f7ae1.js" defer></script><script src="/Pz-blog/assets/js/2.89967461.js" defer></script><script src="/Pz-blog/assets/js/12.309f4d91.js" defer></script>
  </body>
</html>
