<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Pz&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.8">
    <link rel="icon" href="/Pz-blog/images/head_photo.jpg">
    <meta name="description" content="Pz&#39;s blog">
    
    <link rel="preload" href="/Pz-blog/assets/css/0.styles.aa251390.css" as="style"><link rel="preload" href="/Pz-blog/assets/js/app.5bacfa34.js" as="script"><link rel="preload" href="/Pz-blog/assets/js/2.545eef65.js" as="script"><link rel="preload" href="/Pz-blog/assets/js/9.b5fa7adc.js" as="script"><link rel="prefetch" href="/Pz-blog/assets/js/10.8dc47c95.js"><link rel="prefetch" href="/Pz-blog/assets/js/11.a533b947.js"><link rel="prefetch" href="/Pz-blog/assets/js/12.5e06fd55.js"><link rel="prefetch" href="/Pz-blog/assets/js/13.14f40f9c.js"><link rel="prefetch" href="/Pz-blog/assets/js/14.d2712d98.js"><link rel="prefetch" href="/Pz-blog/assets/js/15.ca26a9d0.js"><link rel="prefetch" href="/Pz-blog/assets/js/16.3206b445.js"><link rel="prefetch" href="/Pz-blog/assets/js/17.1cff6853.js"><link rel="prefetch" href="/Pz-blog/assets/js/18.ddfc612a.js"><link rel="prefetch" href="/Pz-blog/assets/js/19.2d63ae87.js"><link rel="prefetch" href="/Pz-blog/assets/js/20.1ef5e876.js"><link rel="prefetch" href="/Pz-blog/assets/js/21.1c14b065.js"><link rel="prefetch" href="/Pz-blog/assets/js/22.e0fd0674.js"><link rel="prefetch" href="/Pz-blog/assets/js/23.f5bca654.js"><link rel="prefetch" href="/Pz-blog/assets/js/24.c810421f.js"><link rel="prefetch" href="/Pz-blog/assets/js/25.1c112c91.js"><link rel="prefetch" href="/Pz-blog/assets/js/26.8297be21.js"><link rel="prefetch" href="/Pz-blog/assets/js/3.abfb5faa.js"><link rel="prefetch" href="/Pz-blog/assets/js/4.644bb109.js"><link rel="prefetch" href="/Pz-blog/assets/js/5.36128020.js"><link rel="prefetch" href="/Pz-blog/assets/js/6.986bbc3b.js"><link rel="prefetch" href="/Pz-blog/assets/js/7.84af3771.js"><link rel="prefetch" href="/Pz-blog/assets/js/8.5b7b0bef.js">
    <link rel="stylesheet" href="/Pz-blog/assets/css/0.styles.aa251390.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Pz-blog/" class="home-link router-link-active"><!----> <span class="site-name">Pz's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          构建工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Pz-blog/notebook/buildTools/webpack.html" class="nav-link">
  webpack
</a></li></ul></li><li class="dropdown-item"><h4>
          操作数据
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Pz-blog/notebook/js/数组操作.html" class="nav-link">
  数组操作
</a></li></ul></li><li class="dropdown-item"><h4>
          数据请求
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Pz-blog/notebook/dataRequest/axios.html" class="nav-link">
  axios
</a></li></ul></li><li class="dropdown-item"><h4>
          布局
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Pz-blog/notebook/layout/flex布局.html" class="nav-link">
  flex布局
</a></li><li class="dropdown-subitem"><a href="/Pz-blog/notebook/layout/Grid布局.html" class="nav-link">
  Grid布局
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow down"></span></button> <button type="button" aria-label="JavaScript" class="mobile-dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Pz-blog/notebook/js/js进阶/JS进阶1.html" class="nav-link">
  js进阶1
</a></li><li class="dropdown-item"><!----> <a href="/Pz-blog/notebook/js/js进阶/JS进阶2.html" class="nav-link">
  js进阶2
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue" class="mobile-dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Vue2
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Pz-blog/notebook/Vue/Vue2/Vue指令.html" class="nav-link">
  Vue指令
</a></li><li class="dropdown-subitem"><a href="/Pz-blog/notebook/Vue/Vue2/Vue-router.html" class="nav-link">
  VueRouter
</a></li></ul></li><li class="dropdown-item"><h4>
          Vue3
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Pz-blog/notebook/Vue/Vue3/Vue3.html" class="nav-link">
  Vue3基本使用
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="React" class="dropdown-title"><span class="title">React</span> <span class="arrow down"></span></button> <button type="button" aria-label="React" class="mobile-dropdown-title"><span class="title">React</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Pz-blog/notebook/React/react-base.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  基础使用
</a></li><li class="dropdown-item"><!----> <a href="/Pz-blog/notebook/React/react-redux.html" class="nav-link">
  react-redux
</a></li><li class="dropdown-item"><!----> <a href="/Pz-blog/notebook/React/react-hooks.html" class="nav-link">
  react-hooks
</a></li><li class="dropdown-item"><!----> <a href="/Pz-blog/notebook/React/project-build.html" class="nav-link">
  项目搭建
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="探索原理" class="dropdown-title"><span class="title">探索原理</span> <span class="arrow down"></span></button> <button type="button" aria-label="探索原理" class="mobile-dropdown-title"><span class="title">探索原理</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Pz-blog/notebook/learnPrinciple/探索原理.html" class="nav-link">
  javaScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="代码管理" class="dropdown-title"><span class="title">代码管理</span> <span class="arrow down"></span></button> <button type="button" aria-label="代码管理" class="mobile-dropdown-title"><span class="title">代码管理</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Pz-blog/notebook/git/Git.html" class="nav-link">
  git
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          构建工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Pz-blog/notebook/buildTools/webpack.html" class="nav-link">
  webpack
</a></li></ul></li><li class="dropdown-item"><h4>
          操作数据
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Pz-blog/notebook/js/数组操作.html" class="nav-link">
  数组操作
</a></li></ul></li><li class="dropdown-item"><h4>
          数据请求
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Pz-blog/notebook/dataRequest/axios.html" class="nav-link">
  axios
</a></li></ul></li><li class="dropdown-item"><h4>
          布局
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Pz-blog/notebook/layout/flex布局.html" class="nav-link">
  flex布局
</a></li><li class="dropdown-subitem"><a href="/Pz-blog/notebook/layout/Grid布局.html" class="nav-link">
  Grid布局
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow down"></span></button> <button type="button" aria-label="JavaScript" class="mobile-dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Pz-blog/notebook/js/js进阶/JS进阶1.html" class="nav-link">
  js进阶1
</a></li><li class="dropdown-item"><!----> <a href="/Pz-blog/notebook/js/js进阶/JS进阶2.html" class="nav-link">
  js进阶2
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue" class="mobile-dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Vue2
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Pz-blog/notebook/Vue/Vue2/Vue指令.html" class="nav-link">
  Vue指令
</a></li><li class="dropdown-subitem"><a href="/Pz-blog/notebook/Vue/Vue2/Vue-router.html" class="nav-link">
  VueRouter
</a></li></ul></li><li class="dropdown-item"><h4>
          Vue3
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Pz-blog/notebook/Vue/Vue3/Vue3.html" class="nav-link">
  Vue3基本使用
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="React" class="dropdown-title"><span class="title">React</span> <span class="arrow down"></span></button> <button type="button" aria-label="React" class="mobile-dropdown-title"><span class="title">React</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Pz-blog/notebook/React/react-base.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  基础使用
</a></li><li class="dropdown-item"><!----> <a href="/Pz-blog/notebook/React/react-redux.html" class="nav-link">
  react-redux
</a></li><li class="dropdown-item"><!----> <a href="/Pz-blog/notebook/React/react-hooks.html" class="nav-link">
  react-hooks
</a></li><li class="dropdown-item"><!----> <a href="/Pz-blog/notebook/React/project-build.html" class="nav-link">
  项目搭建
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="探索原理" class="dropdown-title"><span class="title">探索原理</span> <span class="arrow down"></span></button> <button type="button" aria-label="探索原理" class="mobile-dropdown-title"><span class="title">探索原理</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Pz-blog/notebook/learnPrinciple/探索原理.html" class="nav-link">
  javaScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="代码管理" class="dropdown-title"><span class="title">代码管理</span> <span class="arrow down"></span></button> <button type="button" aria-label="代码管理" class="mobile-dropdown-title"><span class="title">代码管理</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Pz-blog/notebook/git/Git.html" class="nav-link">
  git
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span></span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Pz-blog/notebook/React/react-base.html#一、jsx-与-react-基础" class="sidebar-link">一、jsx 与 react 基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/React/react-base.html#_1、jsx存在意义与解析过程" class="sidebar-link">1、JSX存在意义与解析过程</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/React/react-base.html#_2、react-渲染过程" class="sidebar-link">2、react 渲染过程</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/React/react-base.html#_3、虚拟dom的作用" class="sidebar-link">3、虚拟Dom的作用</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/React/react-base.html#_4、this-指向问题" class="sidebar-link">4、this 指向问题</a></li></ul></li><li><a href="/Pz-blog/notebook/React/react-base.html#二、react-脚手架" class="sidebar-link">二、react 脚手架</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/React/react-base.html#_1、基本使用" class="sidebar-link">1、基本使用</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/React/react-base.html#_2、目录结构" class="sidebar-link">2、目录结构</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/React/react-base.html#_3、查看脚手架webpack配置" class="sidebar-link">3、查看脚手架webpack配置</a></li></ul></li><li><a href="/Pz-blog/notebook/React/react-base.html#三、react-的组件化" class="sidebar-link">三、react 的组件化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/React/react-base.html#_1、组件分类" class="sidebar-link">1、组件分类</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/React/react-base.html#_2、类组件" class="sidebar-link">2、类组件</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/React/react-base.html#_3、函数组件" class="sidebar-link">3、函数组件</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/React/react-base.html#_4、生命周期" class="sidebar-link">4、生命周期</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/React/react-base.html#_5、父子通信" class="sidebar-link">5、父子通信</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/React/react-base.html#_6、context-非父子通信-数据共享" class="sidebar-link">6、context 非父子通信 数据共享</a></li></ul></li><li><a href="/Pz-blog/notebook/React/react-base.html#四、-setsate-详细使用" class="sidebar-link">四、 setSate 详细使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/React/react-base.html#_1、三种用法" class="sidebar-link">1、三种用法</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/React/react-base.html#_2、setstate-为什么是异步的" class="sidebar-link">2、setState 为什么是异步的？</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/React/react-base.html#_3、setstate一定是异步吗" class="sidebar-link">3、setState一定是异步吗？</a></li></ul></li><li><a href="/Pz-blog/notebook/React/react-base.html#五、react-性能优化" class="sidebar-link">五、react 性能优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/React/react-base.html#_1、diff-算法做的优化" class="sidebar-link">1、diff 算法做的优化</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/React/react-base.html#_2、scu-purecomponent与memo做的优化" class="sidebar-link">2、SCU （PureComponent与memo做的优化）</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/React/react-base.html#_3、-react中的数据不可变" class="sidebar-link">3、* react中的数据不可变</a></li></ul></li><li><a href="/Pz-blog/notebook/React/react-base.html#六、react-使用" class="sidebar-link">六、react 使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/React/react-base.html#_1、获取原生dom-ref" class="sidebar-link">1、获取原生DOM ref</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/React/react-base.html#_2、获取组件实例" class="sidebar-link">2、获取组件实例</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/React/react-base.html#_3、函数组件的实例" class="sidebar-link">3、函数组件的实例</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/React/react-base.html#_4、受控组件与非受控组件" class="sidebar-link">4、受控组件与非受控组件</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/React/react-base.html#_5、高阶组件" class="sidebar-link">5、高阶组件</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/React/react-base.html#_6、portals" class="sidebar-link">6、Portals</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/React/react-base.html#_7、fragment-代码块标签" class="sidebar-link">7、Fragment 代码块标签</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/React/react-base.html#_8、-严格模式-strictmode" class="sidebar-link">8、 严格模式 StrictMode</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/React/react-base.html#_9、过渡动画-react-transition-group" class="sidebar-link">9、过渡动画 react-transition-group</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/React/react-base.html#_10、react-中的-css" class="sidebar-link">10、react 中的 css</a></li><li class="sidebar-sub-header"><a href="/Pz-blog/notebook/React/react-base.html#_11、react-动态-class" class="sidebar-link">11、React 动态 class</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><blockquote><ul><li>标有 * 开头的，为 源码解读</li></ul></blockquote> <h2 id="一、jsx-与-react-基础"><a href="#一、jsx-与-react-基础" class="header-anchor">#</a> 一、jsx 与 react 基础</h2> <h3 id="_1、jsx存在意义与解析过程"><a href="#_1、jsx存在意义与解析过程" class="header-anchor">#</a> 1、JSX存在意义与解析过程</h3> <ul><li><code>jsx</code>是为了方便写代码，<code>babel</code>会将<code>jsx</code>转换成为 <code>React.createElement()</code> 函数。</li> <li>React.createElement 语法
<ul><li>React.createElement(component,props, ...children)</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span>React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">className</span><span class="token operator">:</span> <span class="token string">&quot;Content&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>react jsx语法并且使用babel解析编译</strong></p> <div class="language-react extra-class"><pre class="language-text"><code>
  &lt;script type=&quot;text/babel&quot;&gt;
    // 1.定义App根组件
    class App extends React.Component {
      constructor() {
        super();
        this.state = {
          message: &quot;Hello World&quot;
        };
      }

      render() {
        const { message } = this.state;

        return (
          &lt;div&gt;
            &lt;div className=&quot;header&quot;&gt;Header&lt;/div&gt;
            &lt;div className=&quot;Content&quot;&gt;
              &lt;div&gt;{message}&lt;/div&gt;
              &lt;ul&gt;
                &lt;li&gt;列表数据1&lt;/li&gt;
                &lt;li&gt;列表数据2&lt;/li&gt;
                &lt;li&gt;列表数据3&lt;/li&gt;
                &lt;li&gt;列表数据4&lt;/li&gt;
                &lt;li&gt;列表数据5&lt;/li&gt;
              &lt;/ul&gt;
            &lt;/div&gt;
            &lt;div className=&quot;footer&quot;&gt;Footer&lt;/div&gt;
          &lt;/div&gt;
        );
      }
    }

    // 2.创建root并且渲染App组件
    const root = ReactDOM.createRoot(document.querySelector(&quot;#root&quot;));
    root.render(&lt;App /&gt;)
  &lt;/script&gt;
</code></pre></div><p><strong>没有使用 jsx 与 babel 编译</strong></p> <ul><li>直接使用 react原生语法 <code>React.createElement()</code> 创建</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token comment">// 1.定义App根组件</span>
    <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
      <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&quot;Hello World&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state

        <span class="token keyword">const</span> element <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>
          <span class="token string">&quot;div&quot;</span><span class="token punctuation">,</span>
          <span class="token keyword">null</span><span class="token punctuation">,</span>
  <span class="token comment">/*#__PURE__*/</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>
            <span class="token string">&quot;div&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              <span class="token literal-property property">className</span><span class="token operator">:</span> <span class="token string">&quot;header&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string">&quot;Header&quot;</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">/*#__PURE__*/</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>
            <span class="token string">&quot;div&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              <span class="token literal-property property">className</span><span class="token operator">:</span> <span class="token string">&quot;Content&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">/*#__PURE__*/</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;Banner&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">/*#__PURE__*/</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>
              <span class="token string">&quot;ul&quot;</span><span class="token punctuation">,</span>
              <span class="token keyword">null</span><span class="token punctuation">,</span>
      <span class="token comment">/*#__PURE__*/</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>
                <span class="token string">&quot;li&quot;</span><span class="token punctuation">,</span>
                <span class="token keyword">null</span><span class="token punctuation">,</span>
                <span class="token string">&quot;\u5217\u8868\u6570\u636E1&quot;</span>
              <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token comment">/*#__PURE__*/</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>
                <span class="token string">&quot;li&quot;</span><span class="token punctuation">,</span>
                <span class="token keyword">null</span><span class="token punctuation">,</span>
                <span class="token string">&quot;\u5217\u8868\u6570\u636E2&quot;</span>
              <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token comment">/*#__PURE__*/</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>
                <span class="token string">&quot;li&quot;</span><span class="token punctuation">,</span>
                <span class="token keyword">null</span><span class="token punctuation">,</span>
                <span class="token string">&quot;\u5217\u8868\u6570\u636E3&quot;</span>
              <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token comment">/*#__PURE__*/</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>
                <span class="token string">&quot;li&quot;</span><span class="token punctuation">,</span>
                <span class="token keyword">null</span><span class="token punctuation">,</span>
                <span class="token string">&quot;\u5217\u8868\u6570\u636E4&quot;</span>
              <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token comment">/*#__PURE__*/</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;li&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;\u5217\u8868\u6570\u636E5&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">/*#__PURE__*/</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>
            <span class="token string">&quot;div&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              <span class="token literal-property property">className</span><span class="token operator">:</span> <span class="token string">&quot;footer&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string">&quot;Footer&quot;</span>
          <span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span>

        <span class="token keyword">return</span> element
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 2.创建root并且渲染App组件</span>
    <span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>App<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><h3 id="_2、react-渲染过程"><a href="#_2、react-渲染过程" class="header-anchor">#</a> 2、react 渲染过程</h3> <p><strong>jsx &gt; ReactElement &gt; 真实DOM</strong></p> <h4 id="_2-1-jsx"><a href="#_2-1-jsx" class="header-anchor">#</a> 2.1 jsx</h4> <ul><li><code>jsx</code> 创建出来一个 <code>React.createElement()</code></li> <li><code>React.createElement()</code> 返回来一个 <code>虚拟DOM树(Virtual DOM Tree)</code>  而这个DOM树 就是 <code>ReactElement</code> JavaScript 对象</li></ul> <h4 id="_2-2-reactelement-javascript-对象"><a href="#_2-2-reactelement-javascript-对象" class="header-anchor">#</a> 2.2 ReactElement JavaScript 对象</h4> <ul><li>使用 root.render (ReactElement) 就可以将 虚拟dom和真实dom同步起来渲染出来一个 真实DOM</li></ul> <p><strong>React 官方对 Virtual 的 解释</strong></p> <p><img src="/Pz-blog/assets/img/image-20220927141301016.b2f9b3d5.png" alt="image-20220927141301016"></p> <h4 id="_2-3-真实dom"><a href="#_2-3-真实dom" class="header-anchor">#</a> 2.3 真实DOM</h4> <ul><li>多平台控件 DOM元素
<ul><li>div</li> <li>UIView</li></ul></li></ul> <h3 id="_3、虚拟dom的作用"><a href="#_3、虚拟dom的作用" class="header-anchor">#</a> 3、虚拟Dom的作用</h3> <h4 id="_3-1-diff算法"><a href="#_3-1-diff算法" class="header-anchor">#</a> 3.1 diff算法</h4> <ul><li>在 <code>虚拟dom</code> 创建之后会渲染成 <code>真实dom</code> 但是这个时候有依赖数据更改，那么创建的 <code>new虚拟dom</code> 会与 <code>old虚拟dom</code> 作比较，只去<code>更改有变化的数据或者节点</code></li></ul> <h4 id="_3-2-跨平台开发"><a href="#_3-2-跨平台开发" class="header-anchor">#</a> 3.2 跨平台开发</h4> <ul><li>在<code>react-native</code> 中，<code>虚拟dom</code>渲染到<code>真实dom</code>中间有一步叫做<code>桥接</code> <ul><li>这个桥接做的事情就是把虚拟dom中的节点 view button 等元素<code>渲染成对应系统的控件</code>，</li> <li>例如 ios 中的 UIView UIButton</li></ul></li></ul> <h4 id="_3-3-声明式编程的模式"><a href="#_3-3-声明式编程的模式" class="header-anchor">#</a> 3.3 声明式编程的模式</h4> <ul><li>声明式编程 - 虚拟DOM帮助我们从命令式编程转到了声明式编程的模式</li></ul> <ul><li>你只需要告诉React希望让UI是什么状态</li> <li>React来确保DOM和这些状态是匹配的</li> <li>不需要直接进行DOM操作，就可以从手动更改DOM、属性操作、事件处理中解放出来</li></ul> <h3 id="_4、this-指向问题"><a href="#_4、this-指向问题" class="header-anchor">#</a> 4、this 指向问题</h3> <blockquote><p>行内绑定函数本质如下：</p> <ul><li>下方绑定函数最后会编译成
<ul><li>fn= this.btnClick</li> <li>调用时候：fn()
<ul><li>所以this会丢失</li></ul></li></ul></li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code>onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>btnClick<span class="token punctuation">}</span>
</code></pre></div></blockquote> <ul><li><p>this绑定规则</p> <ul><li>普通绑定 - <code>onClick={this.btnClick}</code> - 在内部是独立函数调用,所以this为undefined</li> <li>this绑定方式一: bind绑定 - <code>onClick={this.btnClick.bind(this)}</code></li> <li>this绑定方式二: ES6 class fields - <code>onClick={this.btnClick}</code> - <code>btnClick = () =&gt; {}</code></li> <li>this绑定方式三: 直接传入一个箭头函数 - <code>onClick={() =&gt; this.btnClick()}</code></li></ul></li> <li><p>给函数传递参</p> <ul><li>event参数的传递 - <code>onClick={(event) =&gt; this.btn1Click(event)}</code></li> <li>额外参数的传递 - <code>onClick={(event) =&gt; this.btn2Click(event, &quot;http&quot;, 18)}</code></li></ul></li></ul> <h2 id="二、react-脚手架"><a href="#二、react-脚手架" class="header-anchor">#</a> 二、react 脚手架</h2> <h3 id="_1、基本使用"><a href="#_1、基本使用" class="header-anchor">#</a> 1、基本使用</h3> <ul><li>脚手架名称
<ul><li>create-react-app</li></ul></li> <li>安装
<ul><li>create-react-app 项目名称</li></ul></li> <li>注意事项
<ul><li>项目名称不能包含<code>大写字母</code></li></ul></li></ul> <h3 id="_2、目录结构"><a href="#_2、目录结构" class="header-anchor">#</a> 2、目录结构</h3> <p><img src="/Pz-blog/assets/img/image-20220927163416449.368129eb.png" alt="image-20220927163416449"></p> <p><strong>PWA</strong></p> <p><strong>整个目录结构都非常好理解，只是有一个PWA相关的概念：</strong></p> <ul><li>PWA全称Progressive Web App，即渐进式WEB应用；</li> <li>一个 PWA 应用首先是一个网页, 可以通过 Web 技术编写出一个网页应用；</li> <li>随后添加上 App Manifest 和 Service Worker 来实现 PWA 的安装和离线等功能；</li> <li>这种Web存在的形式，我们也称之为是 Web App；</li></ul> <p><strong>PWA解决了哪些问题呢？</strong></p> <ul><li>可以添加至主屏幕，点击主屏幕图标可以实现启动动画以及隐藏地址栏；</li> <li>实现离线缓存功能，即使用户手机没有网络，依然可以使用一些离线功能；</li> <li>实现了消息推送；</li> <li>等等一系列类似于Native App相关的功能；</li></ul> <p><strong>更多PWA相关的知识，可以自行去学习更多；</strong></p> <p>https://developer.mozilla.org/zh-CN/docs/Web/Progressive_web_apps</p> <h3 id="_3、查看脚手架webpack配置"><a href="#_3、查看脚手架webpack配置" class="header-anchor">#</a> 3、查看脚手架webpack配置</h3> <ul><li>脚手架的package.json 中的脚本</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">#此操作不可逆</span>
<span class="token function">npm</span> run <span class="token function">eject</span>

<span class="token string">&quot;eject&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;react-scripts eject&quot;</span>
</code></pre></div><h2 id="三、react-的组件化"><a href="#三、react-的组件化" class="header-anchor">#</a> 三、react 的组件化</h2> <h3 id="_1、组件分类"><a href="#_1、组件分类" class="header-anchor">#</a> 1、组件分类</h3> <ul><li>根据组件的定义方式，可以分为：<strong>函数组件(Functional Component )<strong>和</strong>类组件(Class Component)</strong>；</li> <li>根据组件内部是否有状态需要维护，可以分成：<strong>无状态组件(Stateless Component )<strong>和</strong>有状态组件(Stateful Component)</strong>；</li> <li>根据组件的不同职责，可以分成：<strong>展示型组件(Presentational Component)<strong>和</strong>容器型组件(Container Component)</strong>；</li> <li>函数组件、无状态组件、展示型组件主要关注UI的展示</li> <li>类组件、有状态组件、容器型组件主要关注数据逻辑；</li></ul> <h3 id="_2、类组件"><a href="#_2、类组件" class="header-anchor">#</a> 2、类组件</h3> <h4 id="_2-1-类组件的定义要求"><a href="#_2-1-类组件的定义要求" class="header-anchor">#</a> 2.1 类组件的定义要求</h4> <ul><li>组件的名称是<strong>大写字符开头</strong>（无论类组件还是函数组件）</li> <li>类组件需要继承自 <strong>React.Component</strong></li> <li>类组件必须实现<strong>render</strong>函数，是 class 组件中唯一必须实现的方法；</li> <li><strong>constructor</strong>是可选的，我们通常在<strong>constructor</strong>中初始化一些数据；</li> <li>this.state中维护的就是我们组件内部的数据；</li></ul> <h4 id="_2-2-render-函数的返回值"><a href="#_2-2-render-函数的返回值" class="header-anchor">#</a> 2.2 render 函数的返回值</h4> <ul><li><p>当 render 被调用时，它会检查 this.props 和 this.state 的变化并返回以下类型之一</p></li> <li><p>React 元素</p> <ul><li>通过<strong>jsx</strong>创建</li> <li><code>div</code> 和 <code>自定义组件</code> 都被称之为 <code>React元素</code> 因为jsx中所有元素最后babel会将其转换为 <code>React.createElement()</code>，并转为 平台需要的元素节点</li></ul></li> <li><p>数组或 fragments：使得 render 方法可以返回多个元素。</p> <ul><li><div class="language-jsx extra-class"><pre class="language-jsx"><code>   <span class="token comment">// 2.组件或者fragments</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cba&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;nba&quot;</span><span class="token punctuation">]</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">h1元素</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">h2元素</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">哈哈哈</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">]</span>
      
    <span class="token comment">// 3.字符串/数字类型</span>
    <span class="token keyword">return</span> <span class="token string">&quot;Hello World&quot;</span>
</code></pre></div></li></ul></li> <li><p>Portals</p> <ul><li>可以渲染子节点到不同的 DOM 子树中</li></ul></li> <li><p>字符串或数值类型</p> <ul><li>它们在 DOM 中会被渲染为文本节点</li></ul></li> <li><p>布尔类型或 null</p> <ul><li>什么都不渲染。</li></ul></li></ul> <h3 id="_3、函数组件"><a href="#_3、函数组件" class="header-anchor">#</a> 3、函数组件</h3> <ul><li>函数组件是使用function来进行定义的函数，只是这个函数会返回和类组件中render函数返回一样的内容。</li> <li>函数组件有自己的特点。(有了hook之后截然不同，如果没有hooks 函数组件就是一个展示性组件)
<ul><li>没有生命周期，也会被更新并挂载，但是没有生命周期函数</li> <li>this关键字不能指向组件实例（因为没有组件实例）；</li> <li>没有内部状态（state）；</li></ul></li></ul> <h3 id="_4、生命周期"><a href="#_4、生命周期" class="header-anchor">#</a> 4、生命周期</h3> <p><a href="https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/" target="_blank" rel="noopener noreferrer">生命周期官方图表<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://react.docschina.org/docs/react-component.html#reference" target="_blank" rel="noopener noreferrer">官方文档生命周期<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="_4-1-生命周期有哪些"><a href="#_4-1-生命周期有哪些" class="header-anchor">#</a> 4.1 生命周期有哪些</h4> <ul><li>constructor
<ul><li>组件实例创建时</li></ul></li> <li>render
<ul><li>数据渲染时，每次数据更改都会触发</li></ul></li> <li>componentDidMount
<ul><li>组件已经挂载到DOM上时回调</li> <li>依赖于<code>DOM的操作</code>可以在这里进行</li> <li>在此处<code>发送网络请求</code>就最好的地方；（官方建议）</li> <li>如果需要<code>添加订阅</code>可以在这里（并且在componentWillUnmount取消订阅）</li></ul></li> <li>componentDidUpdate
<ul><li>组件已经发生了更新时回调，首次渲染不会执行此方法</li> <li>如果 <code>props</code> 发生了变化需要重新请求数据，这里也可以请求</li> <li>并且该回调函数有三个参数
<ul><li>第一个参数：上次更新的 props</li> <li>第二个参数：上次更新的 state</li> <li>第三个参数：上次更新的 snapshot</li></ul></li></ul></li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code> <span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token parameter">prevProps<span class="token punctuation">,</span> prevState<span class="token punctuation">,</span> snapshot</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;HelloWorld componentDidUpdate:&quot;</span><span class="token punctuation">,</span> prevProps<span class="token punctuation">,</span> prevState<span class="token punctuation">,</span> snapshot<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><ul><li><p>componentWillUnmount</p> <ul><li>组件即将被移除时回调</li> <li>这里可以<code>取消订阅</code>与一些<code>必要的清理操作</code></li></ul></li> <li><p>shouldComponentUpdate</p> <ul><li>该函数会在数据更新时候触发（<code>发生在render与componentDidUpdate之前</code>）</li> <li>该函数返回一个布尔值，如果返回 false 那么视图不会更新（可以做性能优化）</li></ul></li> <li><p>getSnapshotBeforeUpdate</p> <ul><li><p>在React更新DOM之前回调的一个函数，可以获取DOM更新前的一些信息</p></li> <li><p>可在该处返回一个返回值，保存一些下次更新需要的值</p> <ul><li>并且可以在 <code>componentDidUpdate</code> 生命周期函数的第三个参数获取</li> <li>类似下方代码记录 滚动距离</li></ul></li> <li><div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">scrollPosition</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li></ul> <h4 id="_4-2-创建时"><a href="#_4-2-创建时" class="header-anchor">#</a> 4.2 创建时</h4> <ul><li>constructor</li> <li>render</li> <li>componentDidMount</li></ul> <h4 id="_4-3-数据更新时"><a href="#_4-3-数据更新时" class="header-anchor">#</a> 4.3 数据更新时</h4> <ul><li>render</li> <li>componentDidUpdate</li></ul> <h4 id="_4-4-数据卸载时"><a href="#_4-4-数据卸载时" class="header-anchor">#</a> 4.4 数据卸载时</h4> <ul><li>componentWillUnmount</li></ul> <h3 id="_5、父子通信"><a href="#_5、父子通信" class="header-anchor">#</a> 5、父子通信</h3> <h4 id="_5-1-父传子"><a href="#_5-1-父传子" class="header-anchor">#</a> 5.1 父传子</h4> <blockquote><p>绑定属性值，子组件中直接获取 <code>this.props</code></p> <p>默认值使用 <code>PropTypes</code></p></blockquote> <ul><li>父组件 Main</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> MainBanner <span class="token keyword">from</span> <span class="token string">&quot;./MainBanner&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> MainProductList <span class="token keyword">from</span> <span class="token string">&quot;./MainProductList&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&quot;axios&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">banners</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">productList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;http://123.207.32.32:8000/home/multidata&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> banners <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>banner<span class="token punctuation">.</span>list<span class="token punctuation">;</span>
      <span class="token keyword">const</span> recommend <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>recommend<span class="token punctuation">.</span>list<span class="token punctuation">;</span>

      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        banners<span class="token punctuation">,</span>
        <span class="token literal-property property">productList</span><span class="token operator">:</span> recommend<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> banners<span class="token punctuation">,</span> productList <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>main<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Main</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">2
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MainBanner</span></span> <span class="token attr-name">banners</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>banners<span class="token punctuation">}</span></span> <span class="token attr-name">title</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&quot;轮播图&quot;</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MainBanner</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MainProductList</span></span> <span class="token attr-name">productList</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>productList<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Main<span class="token punctuation">;</span>

</code></pre></div><ul><li>子组件 MainBanner</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">&quot;prop-types&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;./style.css&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">MainBanner</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token comment">// es2022可以这里设置props默认值，当然不支持babel也会帮忙转化</span>
  <span class="token keyword">static</span> defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">banners</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;默认列表1&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;默认列表2&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;默认轮播图标题&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> banners<span class="token punctuation">,</span> title <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>banner-title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token punctuation">{</span>banners<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
          <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
MainBanner<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">banners</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>array<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span>
  <span class="token literal-property property">title</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 可以这样设置props 默认值</span>
<span class="token comment">// MainBanner.defaultProps = {</span>
<span class="token comment">//   banners: [</span>
<span class="token comment">//     {</span>
<span class="token comment">//       title: &quot;默认列表1&quot;,</span>
<span class="token comment">//     },</span>
<span class="token comment">//     {</span>
<span class="token comment">//       title: &quot;默认列表2&quot;,</span>
<span class="token comment">//     },</span>
<span class="token comment">//   ],</span>
<span class="token comment">//   title: &quot;默认轮播图标题&quot;,</span>
<span class="token comment">// };</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> MainBanner<span class="token punctuation">;</span>

</code></pre></div><ul><li>子组件 MainProductList</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">MainProductList</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token comment">// constructor(props) {</span>
  <span class="token comment">//   super(props);</span>
  <span class="token comment">//   this.state = {};</span>
  <span class="token comment">// }</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> productList <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">商品列表</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token punctuation">{</span>productList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
          <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> MainProductList<span class="token punctuation">;</span>

</code></pre></div><h4 id="_5-2-子传父"><a href="#_5-2-子传父" class="header-anchor">#</a> 5.2 子传父</h4> <blockquote><p>子传父同样使用属性 绑定事件</p></blockquote> <ul><li>父组件 App</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> AddCounter <span class="token keyword">from</span> <span class="token string">&quot;./AddCounter&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> SubCounter <span class="token keyword">from</span> <span class="token string">&quot;./SubCounter&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">counter</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">changeCounter</span><span class="token punctuation">(</span><span class="token parameter">count</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">counter</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>counter <span class="token operator">+</span> count <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> counter <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">当前计数: </span><span class="token punctuation">{</span>counter<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">AddCounter</span></span> <span class="token attr-name">addClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">count</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changeCounter</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>

</code></pre></div><ul><li>子组件 AddCounter</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token comment">// import PropTypes from &quot;prop-types&quot;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AddCounter</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">addCount</span><span class="token punctuation">(</span><span class="token parameter">count</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">addClick</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addCount</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">+1</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addCount</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">+5</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addCount</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">+10</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// AddCounter.propTypes = {</span>
<span class="token comment">//   addClick: PropTypes.func</span>
<span class="token comment">// }</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> AddCounter
</code></pre></div><h3 id="_6、context-非父子通信-数据共享"><a href="#_6、context-非父子通信-数据共享" class="header-anchor">#</a> 6、context 非父子通信 数据共享</h3> <p><strong>类似与vue的 provide 与 inject</strong></p> <h4 id="_6-1-创建上下文-context"><a href="#_6-1-创建上下文-context" class="header-anchor">#</a> 6.1 创建上下文 context</h4> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token comment">// 1.创建一个Context</span>
<span class="token comment">//默认值</span>
<span class="token keyword">const</span> ThemeContext <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'blue'</span><span class="token punctuation">,</span> <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> ThemeContext

</code></pre></div><h4 id="_6-2-提供注入-provider"><a href="#_6-2-提供注入-provider" class="header-anchor">#</a> 6.2 提供注入 Provider</h4> <ul><li>可以多层嵌套，嵌套多个<code>context</code> <ul><li>数据在value中</li></ul></li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> ThemeContext <span class="token keyword">from</span> <span class="token string">'./context/theme-context'</span>
 
<span class="token punctuation">{</span><span class="token comment">/* 第二步操作: 通过ThemeContext中Provider中value属性为后代提供数据 */</span><span class="token punctuation">}</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ThemeContext.Provider</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token string">'30'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Home</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>info<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ThemeContext.Provider</span></span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h4 id="_6-3-使用"><a href="#_6-3-使用" class="header-anchor">#</a> 6.3 使用</h4> <h5 id="_6-3-1-类组件使用-context"><a href="#_6-3-1-类组件使用-context" class="header-anchor">#</a> 6.3.1 类组件使用 context</h5> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> ThemeContext <span class="token keyword">from</span> <span class="token string">'./context/theme-context'</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">HomeInfo</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 4.第四步操作: 获取数据, 并且使用数据</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">HomeInfo: </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span>color<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 3.第三步操作: 设置组件的contextType为某一个Context</span>
HomeInfo<span class="token punctuation">.</span>contextType <span class="token operator">=</span> ThemeContext
</code></pre></div><h5 id="_6-3-2-函数组件使用-consumer"><a href="#_6-3-2-函数组件使用-consumer" class="header-anchor">#</a> 6.3.2 函数组件使用 Consumer</h5> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> ThemeContext <span class="token keyword">from</span> <span class="token string">'./context/theme-context'</span>

<span class="token keyword">function</span> <span class="token function">HomeBanner</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* 函数式组件中使用Context共享的数据 */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ThemeContext.Consumer</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> Banner theme:</span><span class="token punctuation">{</span>value<span class="token punctuation">.</span>color<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ThemeContext.Consumer</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> HomeBanner

</code></pre></div><h2 id="四、-setsate-详细使用"><a href="#四、-setsate-详细使用" class="header-anchor">#</a> 四、 setSate 详细使用</h2> <h3 id="_1、三种用法"><a href="#_1、三种用法" class="header-anchor">#</a> 1、三种用法</h3> <h4 id="_1-1-基本使用"><a href="#_1-1-基本使用" class="header-anchor">#</a> 1.1 基本使用</h4> <div class="language-jsx extra-class"><pre class="language-jsx"><code>    <span class="token comment">// 1.基本使用</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'你好啊, React'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_1-2-函数返回"><a href="#_1-2-函数返回" class="header-anchor">#</a> 1.2 函数返回</h4> <p><strong>这种方式的好处</strong></p> <ul><li>可以在回调函数中编写新的state的逻辑</li> <li>当前的回调函数会将之前的state和props传递进来</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> props<span class="token punctuation">)</span>
      <span class="token comment">// 1.编写一些对新的state处理逻辑</span>
      <span class="token comment">// 2.可以获取之前的state和props值</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>message<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'你好啊, React'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_1-3-callback-解决异步问题"><a href="#_1-3-callback-解决异步问题" class="header-anchor">#</a> 1.3 callback 解决异步问题</h4> <ul><li>这种方式可以在回调函数种解决异步问题，在回调函数中操作</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>message<span class="token punctuation">,</span> <span class="token string">'---'</span><span class="token punctuation">)</span> <span class="token comment">//Hello World</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>
     <span class="token punctuation">{</span>
       <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'你好啊, React'</span><span class="token punctuation">,</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>message<span class="token punctuation">)</span> <span class="token comment">//你好啊, React</span>
     <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>message<span class="token punctuation">,</span> <span class="token string">'---'</span><span class="token punctuation">)</span> <span class="token comment">//Hello World</span>
</code></pre></div><h3 id="_2、setstate-为什么是异步的"><a href="#_2、setstate-为什么是异步的" class="header-anchor">#</a> 2、setState 为什么是异步的？</h3> <p><a href="https://github.com/facebook/react/issues/11527#issuecomment-360199710" target="_blank" rel="noopener noreferrer">React核心成员（Redux的作者）Dan Abramov的回复<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="_2-1-提升性能"><a href="#_2-1-提升性能" class="header-anchor">#</a> 2.1 提升性能</h4> <ul><li>批量处理数据，多次异步<code>setState</code> 调用了一次render函数</li></ul> <blockquote><p>如果是 <code>setSate</code> 同步的,那么每次调用都会触发 <code>render</code> 函数，每次<code>render</code>函数中都要做<code>diff算法</code>，<code>回流</code>，<code>重组</code>等操作，这样会消耗不必要的性能。</p></blockquote> <blockquote><p>而做成异步这样，就会等待多个 <code>setState</code> 改变的数据，一起调用一次<code>render</code>函数</p></blockquote> <h4 id="_2-2-避免-state和props-不同步"><a href="#_2-2-避免-state和props-不同步" class="header-anchor">#</a> 2.2 避免 state和props 不同步</h4> <ul><li>如果同步更新了<code>state</code>，这个时候可能还没有执行render函数，那么就可能造成<code>state</code>和<code>props</code>不能保持同步</li> <li>因为<code>render</code>函数可能不是那么及时，</li> <li>异步就会一起执行<code>render</code>函数所以可以保证<code>state</code>和<code>props</code>的数据一致</li></ul> <h3 id="_3、setstate一定是异步吗"><a href="#_3、setstate一定是异步吗" class="header-anchor">#</a> 3、setState一定是异步吗？</h3> <p><a href="https://react.docschina.org/blog/2022/03/29/react-v18.html#whats-new-in-react-18" target="_blank" rel="noopener noreferrer">官方说明<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <blockquote><p>在<code>react18</code> 之前<code>setTimeout</code> 加入<code>宏任务</code>之后是可以<code>同步</code>的</p> <p>但是在<code>react18</code>开始就没有了</p></blockquote> <div class="language-jsx extra-class"><pre class="language-jsx"><code>    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 在react18之前, setTimeout中setState操作, 是同步操作</span>
      <span class="token comment">// 在react18之后, setTimeout中setState异步操作(批处理)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'你好啊, 李银河'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>在react 18 之后都是<code>异步批处理</code>，除非使用以下方式可以<code>实现同步单处理</code> <ul><li><code>flushSync</code> 函数中也可以<code>写多个setState</code> 因为这个函数内部所有会进行一次批处理</li></ul></li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> flushSync <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dom'</span>
<span class="token function">flushSync</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'你好啊, react'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
   <span class="token comment">//this.setState({ message: '你好啊, react' })</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token comment">//你好啊, react</span>
</code></pre></div><h2 id="五、react-性能优化"><a href="#五、react-性能优化" class="header-anchor">#</a> 五、react 性能优化</h2> <h3 id="_1、diff-算法做的优化"><a href="#_1、diff-算法做的优化" class="header-anchor">#</a> 1、diff 算法做的优化</h3> <ul><li><code>react</code> 在做 <code>diff</code> 算法时候 只会在同一层去遍历查看是否相同</li> <li>如果是内容变化那么就变化内容，如果位置变化就会之后的重新渲染
<ul><li>例如：新dom a、b、c、d、e 旧dom a、b、d、e</li> <li>从第二个开始后边的都会重新渲染</li> <li>这个问题可以使用key来解决</li></ul></li> <li>如果给当前列表绑定了唯一的key，那么就会<code>插入</code>而不是全部渲染
<ul><li>直接在 b d 中间插入 c 后边的向后排</li></ul></li> <li>如果是节点<code>div</code> 变成了 <code>p</code> 那么就会这个节点下的树结构重新渲染(根节点也不例外)</li></ul> <h3 id="_2、scu-purecomponent与memo做的优化"><a href="#_2、scu-purecomponent与memo做的优化" class="header-anchor">#</a> 2、SCU （PureComponent与memo做的优化）</h3> <blockquote><p>是为了优化，父组件 <code>state 变化</code> 子组件<code>没有被影响</code>到就<code>不要去重新渲染</code></p></blockquote> <blockquote><ul><li>shouldComponentUpdate 简称wei <strong>SCU</strong></li></ul> <p><code>PureComponent</code> 底层做的就是<code>shouldComponentUpdate</code>中的新旧对比.来决定是否渲染 <code>render</code> 函数</p> <p><code>memo</code>底层也是做对比是否相同来决定是否调用函数</p></blockquote> <p><strong>场景：一个父组件包裹两个子组件（一个类组件一个函数组件）</strong></p> <ul><li><p>App 父组件</p></li> <li><p>Home 类组件接收父组件 <code>message</code></p></li> <li><p>Person 函数组件接收父组件 <code>counter</code></p></li></ul> <blockquote><p>此时如果App中的message或者counter<code>不管哪一个修改</code>，两个<code>子组件</code>都会<code>重新执行</code>render函数 这样会造成不少的性能消耗</p></blockquote> <h4 id="_2-1-手动scu优化"><a href="#_2-1-手动scu优化" class="header-anchor">#</a> 2.1 手动SCU优化</h4> <ul><li>在 <code>shouldComponentUpdate</code> 函数中又两个参数
<ul><li>一个是 <code>下一个state</code> 一个是<code>下一个props</code></li></ul></li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code>  <span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span><span class="token parameter">newProps<span class="token punctuation">,</span> nextState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 自己对比state是否发生改变: this.state和nextState</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>message <span class="token operator">!==</span> newProps<span class="token punctuation">.</span>message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
</code></pre></div><ul><li>但是手动方式 函数组件是不可以的
<ul><li>并且如果类组件多个<code>state</code>变化 手动来实现是不明智的</li> <li>所以类组件可以继承<code>PureComponent</code></li> <li>函数组件可以使用<code>memo</code> 函数</li></ul></li></ul> <h4 id="_2-2-自动scu优化"><a href="#_2-2-自动scu优化" class="header-anchor">#</a> 2.2 自动SCU优化</h4> <ul><li>类组件 继承 <code>PureComponent</code> 类
<ul><li>让 PureComponent 帮忙自动优化</li></ul></li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Home</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">friends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// shouldComponentUpdate(newProps, nextState) {</span>
  <span class="token comment">//   // 自己对比state是否发生改变: this.state和nextState</span>
  <span class="token comment">//   if (this.props.message !== newProps.message) {</span>
  <span class="token comment">//     return true</span>
  <span class="token comment">//   }</span>
  <span class="token comment">//   return false</span>
  <span class="token comment">// }</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Home render'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Home Page: </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>message<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Home

</code></pre></div><ul><li>函数组件 使用 <code>memo</code> 函数
<ul><li>让 memo 对比是否有改变来决定使用调用 组件函数</li></ul></li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> memo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>

<span class="token keyword">const</span> Person  <span class="token operator">=</span> <span class="token function">memo</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;profile render&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Profile: </span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>counter<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Person 

</code></pre></div><h3 id="_3、-react中的数据不可变"><a href="#_3、-react中的数据不可变" class="header-anchor">#</a> 3、* react中的数据不可变</h3> <h4 id="_3-1-不可以直接修改state中的数据"><a href="#_3-1-不可以直接修改state中的数据" class="header-anchor">#</a> 3.1 不可以直接修改state中的数据</h4> <ul><li>PureComponent</li></ul> <blockquote><ul><li>如果在赋值时候直接修改<strong>state</strong>中的值是不生效的</li> <li>原因是在<strong>react</strong> 中 会去判断两个值是否相同做浅层比较，而修改<strong>state本身内存</strong>中的地址是<strong>同一个地址</strong>，所以判断出来<strong>结果是相同的</strong></li></ul></blockquote> <p><strong>源码中的主要两步（react 18.2.0）</strong></p> <ol><li>判断是否 <code>pureComponent</code> <ul><li>packages\react\src\ReactBaseClasses.js（144行）</li> <li><img src="React.assets/image-20221023154041999.png" alt="image-20221023154041999"></li></ul></li> <li>浅层比较
<ul><li>packages\react-reconciler\src\ReactFiberClassComponent.new.js（355行）</li> <li><img src="React.assets/image-20221023154027031.png" alt="image-20221023154027031"></li> <li>packages\shared\shallowEqual.js（18行）</li> <li><img src="React.assets/image-20221023154007556.png" alt="image-20221023154007556"></li></ul></li></ol> <h2 id="六、react-使用"><a href="#六、react-使用" class="header-anchor">#</a> 六、react 使用</h2> <h3 id="_1、获取原生dom-ref"><a href="#_1、获取原生dom-ref" class="header-anchor">#</a> 1、获取原生DOM ref</h3> <p><strong>获取元素有三种方式</strong></p> <ul><li><code>第二种方法是官方推荐使用的</code></li></ul> <ol><li>在react元素上绑定一个ref字符串（已抛弃）</li></ol> <div class="language-jsx extra-class"><pre class="language-jsx"><code> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>refs<span class="token punctuation">.</span>test<span class="token punctuation">)</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello World</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="2"><li>提前创建好 使用react提供的createRef方法(建议)
<ul><li>并且该方法与 state 是完全无关的</li></ul></li></ol> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> PureComponent<span class="token punctuation">,</span> createRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>  
<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>titleRef <span class="token operator">=</span> <span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>titleRef<span class="token punctuation">.</span>current<span class="token punctuation">)</span>
</code></pre></div><ol start="3"><li>通过回调函数赋值</li></ol> <div class="language-jsx extra-class"><pre class="language-jsx"><code> <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>titleEl <span class="token operator">=</span> <span class="token keyword">null</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>titleEl<span class="token punctuation">)</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>titleEl <span class="token operator">=</span> el <span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token punctuation">&gt;</span></span><span class="token plain-text">
	Hello javaScript
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_2、获取组件实例"><a href="#_2、获取组件实例" class="header-anchor">#</a> 2、获取组件实例</h3> <blockquote><p>获取组件实例同样可以使用 <strong>createRef</strong> 并且可以调用实例的方法</p></blockquote> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> PureComponent<span class="token punctuation">,</span> createRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token comment">//子组件</span>
<span class="token keyword">class</span> <span class="token class-name">HelloWorld</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'HelloWorld中test方法'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">HelloWorld</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//父组件</span>
<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
   <span class="token keyword">this</span><span class="token punctuation">.</span>CompoentInstance <span class="token operator">=</span> <span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">getComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">this</span><span class="token punctuation">.</span>CompoentInstance<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//HelloWorld中test方法</span>
<span class="token punctuation">}</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">HelloWorld</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>CompoentInstance<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><h3 id="_3、函数组件的实例"><a href="#_3、函数组件的实例" class="header-anchor">#</a> 3、函数组件的实例</h3> <blockquote><p>函数组件是没有实例的，也就是说不能使用直接绑定ref 获取内部元素与方法，但是可以<strong>直接给组件中的 某个dom绑定</strong></p></blockquote> <ul><li>需要使用 <strong>forwardRef</strong> 来实现</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> PureComponent<span class="token punctuation">,</span> createRef<span class="token punctuation">,</span> forwardRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token comment">//使用 forwardRef 第二个参数就是传入的ref</span>
<span class="token keyword">const</span> HelloWorld <span class="token operator">=</span> <span class="token function">forwardRef</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> ref</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">HelloWorld</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        &lt;!-- 使用传入ref绑定元素 --&gt;
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">哈哈哈</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//父组件</span>
<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
   <span class="token keyword">this</span><span class="token punctuation">.</span>CompoentInstance <span class="token operator">=</span> <span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">getComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>CompoentInstance<span class="token punctuation">.</span>current<span class="token punctuation">)</span><span class="token comment">//h1 dom</span>
<span class="token punctuation">}</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">HelloWorld</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>CompoentInstance<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><h3 id="_4、受控组件与非受控组件"><a href="#_4、受控组件与非受控组件" class="header-anchor">#</a> 4、受控组件与非受控组件</h3> <h4 id="_4-1-定义"><a href="#_4-1-定义" class="header-anchor">#</a> 4.1 定义</h4> <ul><li>组件自己维护 <code>state</code> 那么就是 <code>非受控组件</code>。</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token punctuation">{</span><span class="token comment">/* 非受控组件 */</span><span class="token punctuation">}</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token punctuation">{</span><span class="token comment">/* 使用  defaultValue 绑定默认值 */</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token comment">/* ref 获取实例 拿到value */</span><span class="token punctuation">}</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">defaultValue</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>intro<span class="token punctuation">}</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>introRef<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><ul><li>由 <code>react state</code> 控制则为受控组件。</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token comment">//value 由react state 管理</span>
<span class="token punctuation">{</span><span class="token comment">/* 受控组件 */</span><span class="token punctuation">}</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>
    <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkbox<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>username<span class="token punctuation">}</span></span>
    <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">inputChange</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="token punctuation">/&gt;</span></span>
</code></pre></div><h3 id="_5、高阶组件"><a href="#_5、高阶组件" class="header-anchor">#</a> 5、高阶组件</h3> <ul><li>高阶组件并不是React API的一部分，它是基于React的组合特性而形成的设计模式；</li></ul> <h4 id="定义"><a href="#定义" class="header-anchor">#</a> 定义</h4> <blockquote><p>高阶组件的英文是 <strong>Higher-Order Components</strong>，简称为 HOC；</p> <ul><li>官方定义
<ul><li><strong>高阶组件是参数为组件，返回值为新组件的函数</strong></li></ul></li> <li>理解定义
<ul><li>一个函数<code>接收一个组件参数</code>并<code>返回一个新的组件</code></li></ul></li></ul></blockquote> <h4 id="意义"><a href="#意义" class="header-anchor">#</a> 意义</h4> <blockquote><p>渲染组件时做一个<code>拦截</code>，在拦截中做一些操作，并<code>优雅的处理代码</code></p> <p><strong>以下几个小例子</strong></p> <ul><li>渲染鉴权判断</li> <li>生命周期劫持 查看渲染时长</li></ul></blockquote> <h4 id="缺点"><a href="#缺点" class="header-anchor">#</a> 缺点</h4> <blockquote><ul><li>HOC需要在原组件上进行包裹或者嵌套，如果大量使用HOC，将会产生非常多的嵌套，这让调试变得非常困难</li> <li>HOC可以劫持props，在不遵守约定的情况下也可能造成冲突；</li></ul></blockquote> <h4 id="使用示例"><a href="#使用示例" class="header-anchor">#</a> 使用示例</h4> <h5 id="_1、登录鉴权高阶组件"><a href="#_1、登录鉴权高阶组件" class="header-anchor">#</a> 1、登录鉴权高阶组件</h5> <ul><li>App.jsx</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> Cart <span class="token keyword">from</span> <span class="token string">'./pages/Cart'</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">loginClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'token'</span><span class="token punctuation">,</span> <span class="token string">'lpz'</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">forceUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loginClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">登录</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Cart</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App

</code></pre></div><ul><li>cart.jsx</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> loginAuth <span class="token keyword">from</span> <span class="token string">'../hoc/login_auth'</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Cart</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Cart Page</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">loginAuth</span><span class="token punctuation">(</span>Cart<span class="token punctuation">)</span>

</code></pre></div><ul><li>login_auth.js</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">loginAuth</span><span class="token punctuation">(</span><span class="token parameter">OriginComponent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> token <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'token'</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token operator">&lt;</span>OriginComponent <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>请先登录，获取token<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> loginAuth

</code></pre></div><h5 id="_2、props-purecomponent"><a href="#_2、props-purecomponent" class="header-anchor">#</a> 2、props PureComponent</h5> <ul><li>App.jsx</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> enhancedUserInfo <span class="token keyword">from</span> <span class="token string">'./hoc/enhanced_props'</span>
<span class="token keyword">import</span> About <span class="token keyword">from</span> <span class="token string">'./pages/About'</span>

<span class="token keyword">const</span> Home <span class="token operator">=</span> <span class="token function">enhancedUserInfo</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      Home: </span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token plain-text">-</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>level<span class="token punctuation">}</span><span class="token plain-text">-</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>banners<span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> Profile <span class="token operator">=</span> <span class="token function">enhancedUserInfo</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      Profile: </span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token plain-text">-</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>level<span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> HelloFriend <span class="token operator">=</span> <span class="token function">enhancedUserInfo</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      HelloFriend: </span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token plain-text">-</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>level<span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Home</span></span> <span class="token attr-name">banners</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token string">'轮播1'</span><span class="token punctuation">,</span> <span class="token string">'轮播2'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Profile</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">HelloFriend</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">

        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">About</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App

</code></pre></div><ul><li>enhanced_props.js</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">enhancedUserInfo</span><span class="token punctuation">(</span><span class="token parameter">OriginComponent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">class</span> <span class="token class-name">enhanced_props</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">userInfo</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'lpz'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">level</span><span class="token operator">:</span> <span class="token number">99</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token operator">&lt;</span>OriginComponent <span class="token punctuation">{</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>userInfo<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> enhanced_props
<span class="token punctuation">}</span>

</code></pre></div><h5 id="_3、context-共享"><a href="#_3、context-共享" class="header-anchor">#</a> 3、context 共享</h5> <ul><li>App.jsx</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> ThemeContext <span class="token keyword">from</span> <span class="token string">'./context/theme_context'</span>
<span class="token keyword">import</span> Product <span class="token keyword">from</span> <span class="token string">'./pages/Product'</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ThemeContext.Provider</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">22</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ThemeContext.Provider</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App

</code></pre></div><ul><li>Product.jsx</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> withTheme <span class="token keyword">from</span> <span class="token string">'../hoc/with_theme'</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Product</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> color<span class="token punctuation">,</span> age <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          Product: </span><span class="token punctuation">{</span>color<span class="token punctuation">}</span><span class="token plain-text">-</span><span class="token punctuation">{</span>age<span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">withTheme</span><span class="token punctuation">(</span>Product<span class="token punctuation">)</span>

</code></pre></div><ul><li>with_theme.js</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> ThemeContext <span class="token keyword">from</span> <span class="token string">'../context/theme_context'</span>

<span class="token keyword">function</span> <span class="token function">withTheme</span><span class="token punctuation">(</span><span class="token parameter">OriginComponment</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>ThemeContext<span class="token punctuation">.</span>Consumer<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token operator">&lt;</span>OriginComponment <span class="token punctuation">{</span><span class="token operator">...</span>value<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>ThemeContext<span class="token punctuation">.</span>Consumer<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> withTheme

</code></pre></div><h3 id="_6、portals"><a href="#_6、portals" class="header-anchor">#</a> 6、Portals</h3> <blockquote><p>Portals 与 vue 的 Teleport 相同，将一个组件内部的一部分模板“传送”到该组件的 DOM 结构外层的位置去。</p></blockquote> <h4 id="_6-1-结合高阶组件使用"><a href="#_6-1-结合高阶组件使用" class="header-anchor">#</a> 6.1 结合高阶组件使用</h4> <ul><li>index.html</li></ul> <div class="language-html extra-class"><pre class="language-html"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lpz<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>modal<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>Modal 组件</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createPortal <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-dom&quot;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Modal</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">createPortal</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#modal&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Modal
</code></pre></div><ul><li>App 组件</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createPortal <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-dom&quot;</span>
<span class="token keyword">import</span> Modal <span class="token keyword">from</span> <span class="token string">'./Modal'</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>app<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">App H1</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span>
          <span class="token function">createPortal</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">App H2</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#lpz&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token plain-text">

        </span><span class="token punctuation">{</span><span class="token comment">/* 2.Modal组件 */</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Modal</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">我是标题</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">我是内容, 哈哈哈</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Modal</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App
</code></pre></div><h3 id="_7、fragment-代码块标签"><a href="#_7、fragment-代码块标签" class="header-anchor">#</a> 7、Fragment 代码块标签</h3> <h4 id="定义-2"><a href="#定义-2" class="header-anchor">#</a> 定义</h4> <blockquote><p>不允许多个根时，可以占位使用</p></blockquote> <p><img src="React.assets/image-20221031161355403.png" alt="image-20221031161355403"></p> <ul><li>可以简写（但是在有 <code>key</code> 的情况下不可以）</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token comment">// 无 key</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">我是App的标题</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">我是App的内容, 哈哈哈哈</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>    

<span class="token comment">// 有 key</span>
<span class="token punctuation">{</span>sections<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Fragment</span></span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>title<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
       </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
       </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>content<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
     </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Fragment</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="_8、-严格模式-strictmode"><a href="#_8、-严格模式-strictmode" class="header-anchor">#</a> 8、 严格模式 <strong>StrictMode</strong></h3> <ul><li>可以检测出一些废弃语法与代码错误</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token comment">// 导入</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> PureComponent<span class="token punctuation">,</span> StrictMode <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">'./pages/Home'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
         &lt;!-- 使用 --&gt;
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">StrictMode</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Home</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">StrictMode</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>

</code></pre></div><h3 id="_9、过渡动画-react-transition-group"><a href="#_9、过渡动画-react-transition-group" class="header-anchor">#</a> 9、过渡动画 <strong>react-transition-group</strong></h3> <h4 id="官方地址"><a href="#官方地址" class="header-anchor">#</a> 官方地址</h4> <p><a href="http://reactcommunity.org/react-transition-group/" target="_blank" rel="noopener noreferrer">react-transition-group<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>react-transition-group主要包含四个组件：</strong></p> <ul><li><p>Transition</p> <ul><li>该组件是一个和平台无关的组件（不一定要结合CSS）；</li> <li>在前端开发中，我们一般是结合CSS来完成样式，所以比较常用的是CSSTransition；</li></ul></li> <li><p>CSSTransition</p> <ul><li>在前端开发中，通常使用CSSTransition来完成过渡动画效果</li></ul></li> <li><p>SwitchTransition</p> <ul><li>两个组件显示和隐藏切换时，使用该组件</li></ul></li> <li><p>TransitionGroup</p> <ul><li>将多个动画组件包裹在其中，一般用于列表中元素的动画；</li></ul></li></ul> <h4 id="_9-1-csstransition"><a href="#_9-1-csstransition" class="header-anchor">#</a> 9.1 CSSTransition</h4> <h5 id="_9-1-1-属性"><a href="#_9-1-1-属性" class="header-anchor">#</a> 9.1.1 属性</h5> <ul><li><p><strong>in 判断进入退出状态</strong></p> <ul><li>布尔值</li></ul></li> <li><p><strong>classNames 动画class的名称</strong></p> <ul><li>决定了在编写css时，对应的class名称：比如card-enter、card-enter-active、card-enter-done；</li></ul></li> <li><p><strong>timeout</strong></p> <ul><li>过渡动画的时间 (类名移除时间)</li></ul></li> <li><p><strong>unmountOnExit</strong>（必须，不然不会卸载组件）</p> <ul><li>退出后卸载组件</li></ul></li></ul> <h5 id="_9-1-2-状态"><a href="#_9-1-2-状态" class="header-anchor">#</a> 9.1.2 状态</h5> <ul><li>三个状态 <strong>appear、enter、exit；</strong> <ul><li>开始状态
<ul><li>-appear、-enter、exit</li></ul></li> <li>enter 执行动画
<ul><li>-appear-active、-enter-active、-exit-active</li></ul></li> <li>exit 执行结束
<ul><li>-appear-done、-enter-done、-exit-done</li></ul></li></ul></li></ul> <h5 id="_9-1-3-示例"><a href="#_9-1-3-示例" class="header-anchor">#</a> 9.1.3 示例</h5> <ul><li>App.jsx</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> CSSTransition <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-transition-group'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./style.css'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">isShow</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>hRef <span class="token operator">=</span> <span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> isShow <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">isShow</span><span class="token operator">:</span> <span class="token operator">!</span>isShow <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          切换显示
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token comment">/* {isShow &amp;&amp; &lt;h2&gt;哈哈哈&lt;/h2&gt;} */</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token comment">/* 这里指定nodeRef可以解决在严格模式下组件需要使用 findDOMNode 方法(findDOMNode已弃用)找节点的警告 */</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token comment">/* unmountOnExit 必须写 当为exit的时候卸载掉包裹内的组件 */</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">CSSTransition</span></span>
          <span class="token attr-name">nodeRef</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>hRef<span class="token punctuation">}</span></span>
          <span class="token attr-name">in</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>isShow<span class="token punctuation">}</span></span>
          <span class="token attr-name">classNames</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lpz<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">timeout</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">1000</span><span class="token punctuation">}</span></span>
          <span class="token attr-name">unmountOnExit</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span></span>
          <span class="token attr-name">appear</span>
          <span class="token attr-name">onEnter</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'开始进入动画'</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
          <span class="token attr-name">onEntering</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'执行进入动画'</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
          <span class="token attr-name">onEntered</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'进入完成动画'</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
          <span class="token attr-name">onExit</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'开始离开动画'</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
          <span class="token attr-name">onExiting</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'执行离开动画'</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
          <span class="token attr-name">onExited</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'离开完成动画'</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
        <span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>hRef<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">哈哈哈</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">CSSTransition</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>

</code></pre></div><ul><li>style.css</li></ul> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* .lpz-appear {
  transform: translateX(-150px);
}
.lpz-appear-active {
  transform: translateX(0);
  transition: transform 1s ease;
} */</span>
<span class="token comment">/* 进入动画 */</span>
<span class="token selector">.lpz-enter,
.lpz-appear</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.lpz-enter-active,
.lpz-appear-active</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> opacity 1s ease<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 离开动画 */</span>
<span class="token selector">.lpz-exit</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> opacity 1s<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.lpz-exit-active</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> opacity 1s<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h4 id="_9-2-switchtransition"><a href="#_9-2-switchtransition" class="header-anchor">#</a> 9.2 SwitchTransition</h4> <h5 id="_9-2-1-属性"><a href="#_9-2-1-属性" class="header-anchor">#</a> 9.2.1 属性</h5> <ul><li><strong>mode</strong> 切换模式
<ul><li>in-out：表示新组件先进入，旧组件再移除；</li> <li>out-in：表示旧组件先移除，新组件再进入；</li></ul></li> <li>需要包裹 <code>CSSTransition 组件</code></li></ul> <h5 id="_9-2-2-示例"><a href="#_9-2-2-示例" class="header-anchor">#</a> 9.2.2 示例</h5> <ul><li>App.jsx</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> CSSTransition<span class="token punctuation">,</span> SwitchTransition <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-transition-group'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./style.css'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">isLogin</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> isLogin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token comment">/* type 模式 out-in in-out */</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">SwitchTransition</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>out-in<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token punctuation">{</span><span class="token comment">/* key 唯一 */</span><span class="token punctuation">}</span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">CSSTransition</span></span>
            <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>isLogin <span class="token operator">?</span> <span class="token string">'go-out'</span> <span class="token operator">:</span> <span class="token string">'go-in'</span><span class="token punctuation">}</span></span>
            <span class="token attr-name">classNames</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">timeout</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">1000</span><span class="token punctuation">}</span></span>
          <span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">isLogin</span><span class="token operator">:</span> <span class="token operator">!</span>isLogin <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token punctuation">{</span>isLogin <span class="token operator">?</span> <span class="token string">'退出'</span> <span class="token operator">:</span> <span class="token string">'登录'</span><span class="token punctuation">}</span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">CSSTransition</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">SwitchTransition</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>

</code></pre></div><ul><li>style.css</li></ul> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.login-enter</span> <span class="token punctuation">{</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>100px<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.login-enter-active</span> <span class="token punctuation">{</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> all 1s ease<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.login-exit</span> <span class="token punctuation">{</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.login-exit-active</span> <span class="token punctuation">{</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>-100px<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> all 1s ease<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h4 id="_9-3-transitiongroup"><a href="#_9-3-transitiongroup" class="header-anchor">#</a> 9.3 TransitionGroup</h4> <h5 id="_9-3-1-属性"><a href="#_9-3-1-属性" class="header-anchor">#</a> 9.3.1 属性</h5> <ul><li>component
<ul><li>使用什么标签包裹 (默认div)</li></ul></li> <li>需要包裹 <code>CSSTransition 组件</code></li></ul> <h5 id="_9-3-2-示例"><a href="#_9-3-2-示例" class="header-anchor">#</a> 9.3.2 示例</h5> <ul><li>App.jsx</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> TransitionGroup<span class="token punctuation">,</span> CSSTransition <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-transition-group'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./style.css'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">books</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">111</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'你不知道JS'</span><span class="token punctuation">,</span> <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">99</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">222</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'JS高级程序设计'</span><span class="token punctuation">,</span> <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">88</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">333</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Vuejs高级设计'</span><span class="token punctuation">,</span> <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">77</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">addNewBook</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> books <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>books<span class="token punctuation">]</span><span class="token punctuation">;</span>
    books<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'React高级程序设计'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token number">99</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> books <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">removeBook</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> books <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>books<span class="token punctuation">]</span><span class="token punctuation">;</span>
    books<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> books <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> books <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">书籍列表:</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token comment">/* component 设置使用什么包裹 默认div */</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TransitionGroup</span></span> <span class="token attr-name">component</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ul<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token punctuation">{</span>books<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">CSSTransition</span></span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span> <span class="token attr-name">classNames</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>book<span class="token punctuation">&quot;</span></span> <span class="token attr-name">timeout</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">5000</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                    </span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token plain-text">-</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>price<span class="token punctuation">}</span><span class="token plain-text">
                  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">removeBook</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">删除</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">CSSTransition</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">TransitionGroup</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addNewBook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">添加新书籍</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>

</code></pre></div><ul><li>style.css</li></ul> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.book-enter</span> <span class="token punctuation">{</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>150px<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.book-enter-active</span> <span class="token punctuation">{</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> all 1s ease<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.book-exit</span> <span class="token punctuation">{</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.book-exit-active</span> <span class="token punctuation">{</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>150px<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> all 1s ease<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="_10、react-中的-css"><a href="#_10、react-中的-css" class="header-anchor">#</a> 10、react 中的 css</h3> <h4 id="_10-1-内联样式"><a href="#_10-1-内联样式" class="header-anchor">#</a> 10.1 内联样式</h4> <h5 id="示例"><a href="#示例" class="header-anchor">#</a> 示例</h5> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>titleSize<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">我是标题</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h5 id="优点"><a href="#优点" class="header-anchor">#</a> 优点</h5> <ul><li>内联样式, 样式之间不会有冲突</li> <li>可以动态获取当前state中的状态</li></ul> <h5 id="缺点-2"><a href="#缺点-2" class="header-anchor">#</a> 缺点</h5> <ul><li>写法上都需要使用驼峰标识</li> <li>样式没提示</li> <li>大量行内代码，特别乱</li> <li>伪类等代码无法编写</li></ul> <h4 id="_10-2-普通的css"><a href="#_10-2-普通的css" class="header-anchor">#</a> 10.2 普通的css</h4> <h5 id="示例-2"><a href="#示例-2" class="header-anchor">#</a> 示例</h5> <ul><li>App.css</li></ul> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.title</span> <span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.content</span> <span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 22px<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> orange<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><ul><li>App.jsx</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token string">&quot;./App.css&quot;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>title<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">我是标题</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>content<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">我是内容, 哈哈哈哈</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h5 id="优点-2"><a href="#优点-2" class="header-anchor">#</a> 优点</h5> <ul><li>编写方便</li> <li>可以动态切换 <code>类名</code></li></ul> <h5 id="缺点-3"><a href="#缺点-3" class="header-anchor">#</a> 缺点</h5> <ul><li><code>全局css</code> 容易覆盖其他组件的样式</li></ul> <h4 id="_10-3-css-modules"><a href="#_10-3-css-modules" class="header-anchor">#</a> 10.3 css modules</h4> <h5 id="示例-3"><a href="#示例-3" class="header-anchor">#</a> 示例</h5> <blockquote><p>需要将 css 文件改为 <code>.module.css/.module.less/.module.scss</code> 后缀</p></blockquote> <ul><li>app.jsx</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> appStyle <span class="token keyword">from</span> <span class="token string">&quot;./App.module.css&quot;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>appStyle<span class="token punctuation">.</span>title<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">我是标题</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>appStyle<span class="token punctuation">.</span>content<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">我是内容, 哈哈哈哈</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>app.module.css</li></ul> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.title</span> <span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.content</span> <span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 22px<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> orange<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="优点-3"><a href="#优点-3" class="header-anchor">#</a> 优点</h5> <ul><li>解决模块化，避免全局样式影响</li></ul> <h5 id="缺点-4"><a href="#缺点-4" class="header-anchor">#</a> 缺点</h5> <ul><li>类名不可以使用<code>链接符</code> <code>lpz-title</code></li> <li>需要当作模块导入进来</li></ul> <h4 id="_10-4-使用-less"><a href="#_10-4-使用-less" class="header-anchor">#</a> 10.4 使用 less</h4> <ul><li><code>create-react-app</code>  简称 <code>craco</code></li></ul> <blockquote><ul><li><p><a href="https://ant.design/docs/react/use-with-create-react-app-cn" target="_blank" rel="noopener noreferrer">ant Design<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 就是使用的 less 编写的css</p></li> <li><p>需要安装插件与 loder 并且配置</p> <ul><li>@craco/craco
<ul><li>可能版本对不上，直接去github上看(@craco/craco@alpha)</li></ul></li> <li>craco-less
<ul><li>可能版本对不上，直接去github上看(craco-less@alpha)</li></ul></li></ul></li> <li><p>需要将 <code>package.json</code>的启动项改一下</p></li></ul> <div class="language-json extra-class"><pre class="language-json"><code>- <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-scripts start&quot;</span><span class="token punctuation">,</span>
- <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-scripts build&quot;</span><span class="token punctuation">,</span>
- <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-scripts test&quot;</span><span class="token punctuation">,</span>

+ <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;craco start&quot;</span><span class="token punctuation">,</span>
+ <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;craco build&quot;</span><span class="token punctuation">,</span>
+ <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;craco test&quot;</span><span class="token punctuation">,</span>
</code></pre></div></blockquote> <h5 id="示例-4"><a href="#示例-4" class="header-anchor">#</a> 示例</h5> <ul><li>craco.config.js</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> CracoLessPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'craco-less'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">plugin</span><span class="token operator">:</span> CracoLessPlugin<span class="token punctuation">,</span>
      <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">lessLoaderOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">lessOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// 注入一些变量</span>
            <span class="token literal-property property">modifyVars</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">'@primary-color'</span><span class="token operator">:</span> <span class="token string">'#1DA57A'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">javascriptEnabled</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><ul><li>App.jsx</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token string">&quot;./App.less&quot;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>title<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">我是标题</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>content<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">我是内容, 哈哈哈</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>App.less</li></ul> <div class="language-less extra-class"><pre class="language-less"><code><span class="token variable">@primaryColor<span class="token punctuation">:</span></span> red<span class="token punctuation">;</span>

<span class="token selector">.section</span> <span class="token punctuation">{</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid <span class="token variable">@primaryColor</span><span class="token punctuation">;</span>

  <span class="token selector">.title</span> <span class="token punctuation">{</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token variable">@primaryColor</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.content</span> <span class="token punctuation">{</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token variable">@primaryColor</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h5 id="优点-4"><a href="#优点-4" class="header-anchor">#</a> 优点</h5> <h5 id="缺点-5"><a href="#缺点-5" class="header-anchor">#</a> 缺点</h5> <ul><li>各种变量太多</li> <li>动态切换 state 中的值 不好切换</li></ul> <h4 id="_10-5-css-in-js-推荐"><a href="#_10-5-css-in-js-推荐" class="header-anchor">#</a> 10.5 css in js (推荐)</h4> <h5 id="styled-components"><a href="#styled-components" class="header-anchor">#</a> <strong>styled-components</strong></h5> <blockquote><ul><li>实现了 <strong>all in js</strong></li> <li>需要使用插件
<ul><li>styled-components</li> <li>本身会变成一个<code>样式组件</code></li></ul></li> <li>vscode 代码提示插件
<ul><li>vscode-styled-components</li></ul></li></ul></blockquote> <h5 id="_10-5-1-使用示例"><a href="#_10-5-1-使用示例" class="header-anchor">#</a> 10.5.1 使用示例</h5> <h6 id="props-默认attrs-变量"><a href="#props-默认attrs-变量" class="header-anchor">#</a> props 默认attrs 变量</h6> <ul><li>App.jsx</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> AppWrapper<span class="token punctuation">,</span> SectionWrapper <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./style'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
      <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">changeColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'yellow'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> size<span class="token punctuation">,</span> color <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">AppWrapper</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token comment">/* 因为本身就是一个组件所以可以接收props  */</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">SectionWrapper</span></span> <span class="token attr-name">size</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>size<span class="token punctuation">}</span></span> <span class="token attr-name">color</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>color<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">我是标题</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">我是内容, 哈哈哈</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changeColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">更改color颜色</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">SectionWrapper</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">免责声明</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">版权声明</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">AppWrapper</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>

</code></pre></div><ul><li>style.js</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> styled <span class="token keyword">from</span> <span class="token string">'styled-components'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> primaryColor<span class="token punctuation">,</span> largeSize <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./style/variables'</span><span class="token punctuation">;</span>

<span class="token comment">//  styled 提示插件(vscode)</span>
<span class="token comment">//  vscode-styled-components</span>

<span class="token comment">// 1.基本使用</span>
<span class="token comment">// 这里的styled.div 会渲染出来一个div</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> AppWrapper <span class="token operator">=</span> styled<span class="token punctuation">.</span>div<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  padding: 10px;
  border: 1px solid red;

  .footer {
    border: 2px solid orange;
  }
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token comment">// 2. 子元素单独抽取到 &quot;样式组件&quot;</span>
<span class="token comment">// 3. 因为本身就是一个组件所以可以接收props</span>
<span class="token comment">// 4. 使用attrs 设置 属性 默认值</span>
<span class="token comment">// 5. 单独文件引入样式 (也可以使用函数)</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> SectionWrapper <span class="token operator">=</span> styled<span class="token punctuation">.</span>div<span class="token punctuation">.</span><span class="token function">attrs</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">sColor</span><span class="token operator">:</span> props<span class="token punctuation">.</span>color <span class="token operator">||</span> <span class="token string">'blue'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  .title {
    font-size: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> props<span class="token punctuation">.</span>size<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px;
    color: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> props<span class="token punctuation">.</span>sColor<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">;
    &amp;:hover {
      background: purple;
    }
  }
  .content {
    font-size: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>largeSize<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px;
    color: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>primaryColor<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">;
  }
  button {
    margin: 10px 0;
  }
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

</code></pre></div><ul><li>variables.js（变量文件）</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> primaryColor <span class="token operator">=</span> <span class="token string">&quot;#ff8822&quot;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> secondColor <span class="token operator">=</span> <span class="token string">&quot;#ff7788&quot;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> smallSize <span class="token operator">=</span> <span class="token string">&quot;12px&quot;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> middleSize <span class="token operator">=</span> <span class="token string">&quot;14px&quot;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> largeSize <span class="token operator">=</span> <span class="token string">&quot;18px&quot;</span>

</code></pre></div><h5 id="_10-5-2-themeprovider-使用"><a href="#_10-5-2-themeprovider-使用" class="header-anchor">#</a> 10.5.2 ThemeProvider 使用</h5> <ul><li>jsx</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ThemeProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'styled-components'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">'./home'</span><span class="token punctuation">;</span>

<span class="token punctuation">{</span><span class="token comment">/* ThemeProvider  */</span><span class="token punctuation">}</span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ThemeProvider</span></span>
     <span class="token attr-name">theme</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
      <span class="token literal-property property">themeColor</span><span class="token operator">:</span> <span class="token string">'purple'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
   <span class="token punctuation">&gt;</span></span><span class="token plain-text">
   	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Home</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ThemeProvider</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>style.js</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> styled <span class="token keyword">from</span> <span class="token string">'styled-components'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> HomeWrapper <span class="token operator">=</span> styled<span class="token punctuation">.</span>div<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  padding: 10px;
  border: 1px solid #000;
  .testProvider {
    /* 在props.theme 获取ThemeProvider的值 */
    color: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> props<span class="token punctuation">.</span>theme<span class="token punctuation">.</span>themeColor<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">;
  }
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

</code></pre></div><h5 id="_10-5-3-继承"><a href="#_10-5-3-继承" class="header-anchor">#</a> 10.5.3 继承</h5> <ul><li>jsx</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ButtonWrapper <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./style'</span><span class="token punctuation">;</span>   

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ButtonWrapper</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">继承</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ButtonWrapper</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>style.js</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> Button <span class="token operator">=</span> styled<span class="token punctuation">.</span>button<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  border: 1px solid red;
  border-radius: 5px;
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> ButtonWrapper <span class="token operator">=</span> <span class="token function">styled</span><span class="token punctuation">(</span>Button<span class="token punctuation">)</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  background-color: #0f0;
  color: #fff;
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre></div><h5 id="优点-5"><a href="#优点-5" class="header-anchor">#</a> 优点</h5> <ul><li>可以解决模块化</li> <li>可以使用 state</li> <li>灵活性高</li></ul> <h5 id="缺点-6"><a href="#缺点-6" class="header-anchor">#</a> 缺点</h5> <ul><li>我说没有就是没有</li></ul> <h3 id="_11、react-动态-class"><a href="#_11、react-动态-class" class="header-anchor">#</a> 11、React 动态 class</h3> <blockquote><ul><li>classnames 插件</li></ul></blockquote> <ul><li>App.jsx</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> classNames <span class="token keyword">from</span> <span class="token string">'classnames'</span><span class="token punctuation">;</span>

 <span class="token punctuation">{</span><span class="token comment">/* 普通使用 */</span><span class="token punctuation">}</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">aaa </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>isbbb <span class="token operator">?</span> <span class="token string">'bbb'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>isccc <span class="token operator">?</span> <span class="token string">'ccc'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">哈哈哈</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>classname<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">呵呵呵</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span> 

<span class="token punctuation">{</span><span class="token comment">/* classNames使用 */</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token comment">/* 对象 */</span><span class="token punctuation">}</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">classNames</span><span class="token punctuation">(</span><span class="token string">'aaa'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">bbb</span><span class="token operator">:</span> isbbb<span class="token punctuation">,</span> <span class="token literal-property property">ccc</span><span class="token operator">:</span> isccc <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">嘿嘿嘿</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">{</span><span class="token comment">/* 数组 */</span><span class="token punctuation">}</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">classNames</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'aaa'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">bbb</span><span class="token operator">:</span> isbbb<span class="token punctuation">,</span> <span class="token literal-property property">ccc</span><span class="token operator">:</span> isccc <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">嘻嘻嘻</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/Pz-blog/assets/js/app.5bacfa34.js" defer></script><script src="/Pz-blog/assets/js/2.545eef65.js" defer></script><script src="/Pz-blog/assets/js/9.b5fa7adc.js" defer></script>
  </body>
</html>
